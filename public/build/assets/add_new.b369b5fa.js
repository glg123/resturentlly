import{c as W,U as n,s as r,aP as H,ai as O,o as Q,f as X,w as t,g as l,C as v,j as m,e as s,z as d,i as g,y as Y,bf as Z,be as ee,W as le}from"./main.e5722c22.js";import{e as ae,a as oe,d as te}from"./validators.330a354f.js";import{b as D}from"./route-block.2f1a6263.js";import{V as R}from"./VBtn.4327307d.js";import{V as N}from"./VSnackbar.dc45fad4.js";import{V as se,c as q}from"./VCard.2abcdcfe.js";import{V as re}from"./VForm.be976fbe.js";import{V as E,a as u}from"./VRow.f8de802a.js";import{V as ue}from"./VAvatar.1bc59f66.js";import{V}from"./VTextField.c7d5535f.js";import{V as G}from"./VSelect.23e06609.js";import"./index.b522f886.js";import"./router.f3c33ba4.js";import"./position.fb77405d.js";import"./scopeId.23faa331.js";import"./forwardRefs.c003b6b8.js";import"./VOverlay.ed5a8d46.js";import"./lazy.d1bb34b2.js";import"./easing.36b781ab.js";import"./VImg.a33717ea.js";import"./VInput.1a6e2ae8.js";import"./index.19c19380.js";/* empty css                   */import"./VField.01372b27.js";import"./VCounter.bc3c6bfa.js";import"./VList.345ceaa4.js";import"./VDivider.19cd6d54.js";import"./dialog-transition.738c368f.js";import"./VMenu.1340a45a.js";import"./VCheckboxBtn.d3981e2f.js";import"./VSelectionControl.336d6e11.js";import"./VChip.f64a01b2.js";const ne={ref:"refForm_front",class:"d-flex flex-column justify-center gap-4"},de={class:"d-flex flex-wrap gap-2"},me={class:"d-none d-sm-block"},ie=g("p",{class:"text-body-1 mb-0"}," Allowed JPG, GIF or PNG. Max size of 800K ",-1),fe={__name:"add_new",setup(pe){const A=ee(),T=le(),{isAppRtl:z}=W();let U=localStorage.getItem("accessToken");n.defaults.headers.common["Content-Type"]="application/json",n.defaults.headers.common.Accept="application/json",z.value===!0?n.defaults.headers.common.Language="ar":n.defaults.headers.common.Language="en",n.defaults.headers.common.type="Admin",n.defaults.headers.common.role="Admin",n.defaults.headers.common.auth="Bearer "+U;const i=o=>String(o).trim().length==0?C("This field is required"):!0,h=r(""),L=()=>{var o;(o=P.value)==null||o.validate().then(({valid:e})=>{console.log(e),e&&(S.value=!0,F.value=!0,n.post("add/admins",{name:b.value,mobile:k.value,password:f.value,email:w.value,admin_role_id:y.value,status:$.value,avatar:I.value,token:U}).then(a=>{console.log(a.data),p.value=!0,S.value=!1,F.value=!1,T.replace(A.query.to?String(A.query.to):"/admin/apps/admins/list/")}).catch(a=>{console.log(a.response.data.message),h.value=a.response.data.message,c.value=!0,S.value=!1,F.value=!1}))})},b=r(""),k=r(""),M=r(""),f=r(""),_=r(""),w=r(""),P=r(),y=r(),$=r(),I=r(),{t:C}=H(),j=r([]),J=[{title:C("block"),value:"block"},{title:C("active"),value:"active"},{title:C("not_active"),value:"not_active"}],x=r(),p=r(!1),c=r(!1),F=r(!1),S=r(!1),K=o=>{const e=new FileReader,{files:a}=o.target;a&&a.length&&(e.readAsDataURL(a[0]),e.onload=()=>{typeof e.result=="string"&&(I.value=e.result)})};return O(T,()=>{n.get("/roles/select",{token:U}).then(o=>{for(var e=0;e<o.data.length;e++)console.log(o.data[e].id,"res"),console.log(o.data[e].role_name,"res"),j.value[e]={title:o.data[e].role_name,value:o.data[e].id};console.log(j.value,"res")})},{immediate:!0}),(o,e)=>(Q(),X(E,null,{default:t(()=>[l(N,{location:"top",modelValue:s(p),"onUpdate:modelValue":e[1]||(e[1]=a=>d(p)?p.value=a:null)},{actions:t(()=>[l(R,{color:"success",onClick:e[0]||(e[0]=a=>p.value=!1)},{default:t(()=>[v(m(o.$t("Close")),1)]),_:1})]),default:t(()=>[v(m(o.$t("Done"))+" ",1)]),_:1},8,["modelValue"]),l(N,{color:"error",location:"top",modelValue:s(c),"onUpdate:modelValue":e[3]||(e[3]=a=>d(c)?c.value=a:null)},{actions:t(()=>[l(R,{color:"success",onClick:e[2]||(e[2]=a=>c.value=!1)},{default:t(()=>[v(m(o.$t("Close")),1)]),_:1})]),default:t(()=>[v(m(s(h))+" ",1)]),_:1},8,["modelValue"]),l(u,{cols:"12"},{default:t(()=>[l(se,{title:o.$t("AddNew")},{default:t(()=>[l(q,{class:"pt-2"},{default:t(()=>[l(re,{ref_key:"refForm",ref:P,class:"mt-6"},{default:t(()=>[l(E,null,{default:t(()=>[l(u,{md:"12",cols:"12"},{default:t(()=>[l(q,{class:"d-flex"},{default:t(()=>[l(ue,{rounded:"",size:"100",class:"me-6",image:s(I)},null,8,["image"]),g("form",ne,[g("div",de,[l(R,{color:"primary",onClick:e[4]||(e[4]=a=>{var B;return(B=s(x))==null?void 0:B.click()})},{default:t(()=>[l(Y,{icon:"tabler-cloud-upload",class:"d-sm-none"}),g("span",me,m(o.$t("slider_back_img")),1)]),_:1}),g("input",{ref_key:"refInputEl_front",ref:x,type:"file",name:"file_back",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:K},null,544)]),ie],512)]),_:1})]),_:1}),l(u,{md:"6",cols:"12"},{default:t(()=>[l(V,{modelValue:s(b),"onUpdate:modelValue":e[5]||(e[5]=a=>d(b)?b.value=a:null),label:o.$t("Full_name"),rules:[i]},null,8,["modelValue","label","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(V,{modelValue:s(w),"onUpdate:modelValue":e[6]||(e[6]=a=>d(w)?w.value=a:null),label:o.$t("email"),rules:[i,s(ae)]},null,8,["modelValue","label","rules"])]),_:1}),l(u,{md:"6",cols:"12"},{default:t(()=>[l(G,{modelValue:s(y),"onUpdate:modelValue":e[7]||(e[7]=a=>d(y)?y.value=a:null),label:o.$t("Select Role"),items:s(j),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","label","items"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(V,{modelValue:s(k),"onUpdate:modelValue":e[8]||(e[8]=a=>d(k)?k.value=a:null),label:o.$t("mobile"),rules:[i,s(oe)(s(M),"^([0-9]+)$")]},null,8,["modelValue","label","rules"])]),_:1}),l(u,{md:"6",cols:"12"},{default:t(()=>[l(G,{modelValue:s($),"onUpdate:modelValue":e[9]||(e[9]=a=>d($)?$.value=a:null),label:o.$t("Select Status"),items:J,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","label"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(V,{modelValue:s(f),"onUpdate:modelValue":e[10]||(e[10]=a=>d(f)?f.value=a:null),label:o.$t("password"),type:"password",rules:[i],autocomplete:"on"},null,8,["modelValue","label","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(V,{modelValue:s(_),"onUpdate:modelValue":e[11]||(e[11]=a=>d(_)?_.value=a:null),label:o.$t("password_confirm"),type:"password",rules:[i,s(te)(s(_),s(f))],autocomplete:"on"},null,8,["modelValue","label","rules"])]),_:1}),l(u,{cols:"12"},{default:t(()=>[l(R,{type:"submit",loading:s(S),disabled:s(F),onClick:Z(L,["prevent"])},{default:t(()=>[v(m(o.$t("Save changes")),1)]),_:1},8,["loading","disabled","onClick"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["title"])]),_:1})]),_:1}))}};typeof D=="function"&&D(fe);export{fe as default};

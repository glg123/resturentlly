import{c as I,U as e,s as o,be as N,W as j,aP as q,o as M,f as R,w as a,g as s,i as y,j as c,C as _,e as v}from"./main.e5722c22.js";import{V as U}from"./vue-cookies.aacfa879.js";import{u as J}from"./useAppAbility.977f44d8.js";import{V as L,c as O,d as P}from"./VCard.2abcdcfe.js";import{V as u}from"./VBtn.4327307d.js";import{V as E}from"./VDialog.6304c993.js";const W=y("span",{class:"text-5xl"},"!",-1),z={class:"text-lg font-weight-medium"},Y={__name:"CancelPlan",props:{confirmationMsg:{type:String,required:!0},isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","confirm"],setup(b,{emit:l}){const d=b,{isAppRtl:C}=I();let f=localStorage.getItem("accessToken");e.defaults.headers.common["Content-Type"]="application/json",e.defaults.headers.common.Accept="application/json",C.value===!0?e.defaults.headers.common.Language="ar":e.defaults.headers.common.Language="en",e.defaults.headers.common.type="User",e.defaults.headers.common.role="user",e.defaults.headers.common.auth="Bearer "+f;const x=o(!1),k=o(!1),r=o(!1),i=o(!1),D=o({}),m=N(),S=j(),T=J(),{t:p}=q(),g=n=>{l("update:isDialogVisible",n)},A=()=>{i.value=!0,r.value=!0;let n="client/cancel/subscribe/plan";e.post(n,{token:f}).then(t=>{x.value=!0,i.value=!1,r.value=!1;const{accessToken:h,userData:B,userAbilities:V}=t.data;localStorage.setItem("userAbilities",JSON.stringify(V)),T.update(V),localStorage.setItem("userData",JSON.stringify(B)),localStorage.setItem("accessToken",h),U.set("auth",h),S.replace(m.query.to?String(m.query.to):"/dashboards/analytics")}).catch(t=>{console.log(t),D.value=t,k.value=!0,i.value=!1,r.value=!1}),l("confirm",!0),g(!1)},w=()=>{l("confirm",!1),l("update:isDialogVisible",!1)};return(n,t)=>(M(),R(E,{"max-width":"500","model-value":d.isDialogVisible,"onUpdate:modelValue":g},{default:a(()=>[s(L,{class:"text-center px-10 py-6"},{default:a(()=>[s(O,null,{default:a(()=>[s(u,{icon:"",variant:"outlined",color:"warning",class:"mb-4",style:{width:"88px",height:"88px","pointer-events":"none"}},{default:a(()=>[W]),_:1}),y("h6",z,c(d.confirmationMsg),1)]),_:1}),s(P,{class:"align-center justify-center gap-2"},{default:a(()=>[s(u,{variant:"elevated",onClick:A},{default:a(()=>[_(c(v(p)("Confirm")),1)]),_:1}),s(u,{color:"secondary",variant:"tonal",onClick:w},{default:a(()=>[_(c(v(p)("Cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}};export{Y as _};

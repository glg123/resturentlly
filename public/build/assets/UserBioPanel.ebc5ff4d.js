import{U as L,s as n,aP as M,be as J,$ as f,bC as B,o as I,f as S,w as a,g as e,e as s,z as x,C as m,j as u,l as K,i as c,bf as O,y as H,p as Q,a0 as W,a1 as X}from"./main.a5f2feaa.js";import{a as Y}from"./formatters.ab6dea15.js";import{V as N}from"./VSnackbar.fa1e60a2.js";import{V as b}from"./VBtn.a433eeed.js";import{a as i,V as _}from"./VRow.11c141e1.js";import{V as D,c as g,a as Z,b as ee}from"./VCard.09420318.js";import{V as z}from"./VAvatar.17d32ef5.js";import{V as ae}from"./VImg.b81fa5df.js";import{V as le}from"./VChip.d1d16c5d.js";import{V as te}from"./VDivider.2bd6b130.js";import{V as F}from"./VForm.6997ee7f.js";import{V as U}from"./VTextField.0a298259.js";import{V as oe}from"./VSelect.d5a260e9.js";const se=p=>(W("data-v-698c8931"),p=p(),X(),p),re={key:1,class:"text-5xl font-weight-semibold"},ne={class:"text-h6 mt-4"},ue={ref:"refForm_front",class:"d-flex flex-column justify-center gap-4"},de={class:"d-flex flex-wrap gap-2"},ie={class:"d-none d-sm-block"},me=se(()=>c("p",{class:"text-body-1 mb-0"}," Allowed JPG, GIF or PNG. Max size of 800K ",-1)),fe={__name:"UserBioPanel",props:{userData:{type:Object,required:!0}},setup(p){const d=p,P=n(),{t:R}=M();n(!1);const y=t=>String(t).trim().length===0?R("This field is required"):!0,T=n();J();const k=n(!1);n(!1);const h=n("");n("");const v=n(!1),V=n(!1),w=n(!1),C=n(!1),E=t=>{const l=new FileReader,{files:o}=t.target;o&&o.length&&(l.readAsDataURL(o[0]),l.onload=()=>{typeof l.result=="string"&&(r.value.avatar=l.result)})};let j=localStorage.getItem("accessToken");f.defaults.headers.common["Content-Type"]="application/json",f.defaults.headers.common.Accept="application/json",f.defaults.headers.common.Language="ar",f.defaults.headers.common.type="Admin",f.defaults.headers.common.auth="token "+j;const r=n(structuredClone(B(d.userData))),A=()=>{var t;(t=T.value)==null||t.validate().then(({valid:l})=>{console.log(l),l&&(C.value=!0,w.value=!0,f.post("admins/"+d.userData.id,{name:r.value.name,role:r.value.role,email:r.value.email,mobile:r.value.mobile,avatar:r.value.avatar,status:r.value.status,password:r.value.password,token:j}).then(o=>{v.value=!0,C.value=!1,w.value=!1,console.log(o.response)}).catch(o=>{const{errors:$}=o.response.data;V.value=!0,C.value=!1,w.value=!1,errors.value=$,console.error(o.response.data)}))})},G=()=>{r.value=structuredClone(B(d.userData))},q=t=>t==="subscriber"?{color:"warning",icon:"tabler-user"}:t==="author"?{color:"success",icon:"tabler-circle-check"}:t==="maintainer"?{color:"primary",icon:"tabler-chart-pie-2"}:t==="editor"?{color:"info",icon:"tabler-pencil"}:t==="admin"?{color:"secondary",icon:"tabler-server-2"}:{color:"primary",icon:"tabler-user"};return(t,l)=>(I(),S(_,null,{default:a(()=>[e(N,{location:"top",modelValue:s(v),"onUpdate:modelValue":l[1]||(l[1]=o=>x(v)?v.value=o:null)},{actions:a(()=>[e(b,{color:"success",onClick:l[0]||(l[0]=o=>v.value=!1)},{default:a(()=>[m(u(t.$t("Close")),1)]),_:1})]),default:a(()=>[m(u(t.$t("Done"))+" ",1)]),_:1},8,["modelValue"]),e(N,{color:"error",location:"top",modelValue:s(V),"onUpdate:modelValue":l[3]||(l[3]=o=>x(V)?V.value=o:null)},{actions:a(()=>[e(b,{color:"success",onClick:l[2]||(l[2]=o=>V.value=!1)},{default:a(()=>[m(u(t.$t("Close")),1)]),_:1})]),default:a(()=>[m(u(t.errors)+" ",1)]),_:1},8,["modelValue"]),e(i,{cols:"12"},{default:a(()=>[d.userData?(I(),S(D,{key:0},{default:a(()=>[e(g,{class:"text-center pt-15"},{default:a(()=>[e(z,{rounded:"",size:120,color:"primary",variant:"tonal"},{default:a(()=>[d.userData.avatar?(I(),S(ae,{key:0,src:d.userData.avatar},null,8,["src"])):(I(),K("span",re,u(s(Y)(d.userData.name)),1))]),_:1}),c("h6",ne,u(d.userData.name),1),e(le,{label:"",color:q(d.userData.role).color,size:"small",class:"text-capitalize mt-4"},{default:a(()=>[m(u(t.$t(d.userData.role)),1)]),_:1},8,["color"])]),_:1}),e(te),e(Z,{class:"text-center"},{default:a(()=>[e(ee,{class:"text-h5 mb-3"},{default:a(()=>[m(u(t.$t("Edit User Information")),1)]),_:1})]),_:1}),e(g,null,{default:a(()=>[e(F,{ref_key:"refForm",ref:T,class:"mt-6",onSubmit:O(A,["prevent"])},{default:a(()=>[e(_,null,{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(D,{title:t.$t("avatar")},{default:a(()=>[e(g,{class:"d-flex"},{default:a(()=>[e(z,{rounded:"",size:"100",class:"me-6",image:s(r).avatar},null,8,["image"]),c("form",ue,[c("div",de,[e(b,{color:"primary",onClick:l[4]||(l[4]=o=>{var $;return($=s(P))==null?void 0:$.click()})},{default:a(()=>[e(H,{icon:"tabler-cloud-upload",class:"d-sm-none"}),c("span",ie,u(t.$t("slider_back_img")),1)]),_:1}),c("input",{ref_key:"refInputEl_front",ref:P,type:"file",name:"file_back",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:E},null,544)]),me],512)]),_:1})]),_:1},8,["title"])]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(D,{title:t.$t("basic_information")},{default:a(()=>[e(F,null,{default:a(()=>[e(g,{class:"pt-0"},{default:a(()=>[e(_,null,{default:a(()=>[e(i,{cols:"12",md:"6"},{default:a(()=>[e(U,{modelValue:s(r).name,"onUpdate:modelValue":l[5]||(l[5]=o=>s(r).name=o),label:s(R)("name"),rules:[y]},null,8,["modelValue","label","rules"])]),_:1}),e(i,{cols:"12",md:"6"},{default:a(()=>[e(U,{modelValue:s(r).email,"onUpdate:modelValue":l[6]||(l[6]=o=>s(r).email=o),label:t.$t("email"),rules:[y]},null,8,["modelValue","label","rules"])]),_:1})]),_:1}),e(_,null,{default:a(()=>[e(i,{cols:"12",md:"6"},{default:a(()=>[e(oe,{modelValue:s(r).status,"onUpdate:modelValue":l[7]||(l[7]=o=>s(r).status=o),chips:"",label:t.$t("status"),rules:[y],items:["active","not_active","block"]},null,8,["modelValue","label","rules"])]),_:1}),e(i,{cols:"12",md:"6"},{default:a(()=>[e(U,{modelValue:s(r).mobile,"onUpdate:modelValue":l[8]||(l[8]=o=>s(r).mobile=o),label:t.$t("mobile"),rules:[y]},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(D,{title:t.$t("Change_Password")},{default:a(()=>[e(F,null,{default:a(()=>[e(g,{class:"pt-0"},{default:a(()=>[e(_,null,{default:a(()=>[e(i,{cols:"12",md:"6"},{default:a(()=>[e(U,{modelValue:s(h),"onUpdate:modelValue":l[9]||(l[9]=o=>x(h)?h.value=o:null),type:s(k)?"text":"password","append-inner-icon":s(k)?"tabler-eye-off":"tabler-eye",label:"New Password","onClick:appendInner":l[10]||(l[10]=o=>k.value=!s(k))},null,8,["modelValue","type","append-inner-icon"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),e(i,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:a(()=>[e(b,{type:"submit",loading:s(C),disabled:s(w)},{default:a(()=>[m(u(t.$t("Save changes")),1)]),_:1},8,["loading","disabled"]),e(b,{color:"secondary",variant:"tonal",onClick:G},{default:a(()=>[m(u(t.$t("Cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})):Q("",!0)]),_:1})]),_:1}))}},De=L(fe,[["__scopeId","data-v-698c8931"]]);export{De as U};

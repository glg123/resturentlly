import{c as X,U as n,bg as Y,K as H,s as i,aP as Q,be as E,bF as A,o as I,f as P,w as a,g as e,e as s,z as j,C as b,j as d,l as W,i as g,bf as Z,y as ee,p as q,X as ae,Y as te,ai as le}from"./main.e5722c22.js";import{a as oe}from"./formatters.ab6dea15.js";import{V as N}from"./VSnackbar.dc45fad4.js";import{V as k}from"./VBtn.4327307d.js";import{a as m,V as y}from"./VRow.f8de802a.js";import{V as F,c as w,a as se,b as re}from"./VCard.2abcdcfe.js";import{V as L}from"./VAvatar.1bc59f66.js";import{V as ne}from"./VImg.a33717ea.js";import{V as ue}from"./VChip.f64a01b2.js";import{V as ie}from"./VDivider.19cd6d54.js";import{V as R}from"./VForm.be976fbe.js";import{V as S}from"./VTextField.c7d5535f.js";import{b as z}from"./route-block.2f1a6263.js";import"./index.b522f886.js";import"./router.f3c33ba4.js";import"./position.fb77405d.js";import"./scopeId.23faa331.js";import"./forwardRefs.c003b6b8.js";import"./VOverlay.ed5a8d46.js";import"./lazy.d1bb34b2.js";import"./easing.36b781ab.js";import"./index.19c19380.js";import"./VInput.1a6e2ae8.js";/* empty css                   */import"./VField.01372b27.js";import"./VCounter.bc3c6bfa.js";const{isAppRtl:de}=X();let G=localStorage.getItem("accessToken");n.defaults.headers.common["Content-Type"]="application/json";n.defaults.headers.common.Accept="application/json";de.value===!0?n.defaults.headers.common.Language="ar":n.defaults.headers.common.Language="en";n.defaults.headers.common.type="Customer";n.defaults.headers.common.role="customer";n.defaults.headers.common.auth="Bearer "+G;const me=Y("CustomerListStore",{actions:{addUser(c){return new Promise((u,f)=>{n.post("/apps/users/user",{user:c}).then(p=>u(p)).catch(p=>f(p))})},getSingleUser(){return new Promise((c,u)=>{n.get("my/profile",{token:G}).then(f=>c(f)).catch(f=>u(f))})}}});const ce=c=>(ae("data-v-0627f019"),c=c(),te(),c),fe={key:1,class:"text-5xl font-weight-semibold"},pe={class:"text-h6 mt-4"},_e={ref:"refForm_front",class:"d-flex flex-column justify-center gap-4"},be={class:"d-flex flex-wrap gap-2"},ve={class:"d-none d-sm-block"},Ve=ce(()=>g("p",{class:"text-body-1 mb-0"}," Allowed JPG, GIF or PNG. Max size of 800K ",-1)),ge={__name:"UserBioPanel",props:{userData:{type:Object,required:!0},roles:{type:Object,required:!0}},setup(c){const u=c,f=i(),p=i(),{t:_}=Q();i(!1);const V=l=>String(l).trim().length===0?_("This field is required"):!0,T=i();E();const v=i(!1);i(!1);const D=i("");i("");const h=i(!1),C=i(!1),$=i(!1),U=i(!1),O=l=>{const t=new FileReader,{files:o}=l.target;o&&o.length&&(t.readAsDataURL(o[0]),t.onload=()=>{typeof t.result=="string"&&(r.value.avatar=t.result)})};let B=localStorage.getItem("accessToken");n.defaults.headers.common["Content-Type"]="application/json",n.defaults.headers.common.Accept="application/json",n.defaults.headers.common.Language="ar",n.defaults.headers.common.type="Customer",n.defaults.headers.common.role="customer",n.defaults.headers.common.auth="Bearer "+B;const r=i(structuredClone(A(u.userData)));p.value=r.value.admin_role_id;const J=()=>{var l;(l=T.value)==null||l.validate().then(({valid:t})=>{console.log(t),t&&(U.value=!0,$.value=!0,n.post("edit/my/profile",{first_name:r.value.first_name,last_name:r.value.last_name,email:r.value.email,mobile:r.value.mobile,avatar:r.value.avatar,password:r.value.password,token:B}).then(o=>{h.value=!0,U.value=!1,$.value=!1,console.log(o.response)}).catch(o=>{const{errors:x}=o.response.data;C.value=!0,U.value=!1,$.value=!1,errors.value=x,console.error(o.response.data)}))})},K=()=>{r.value=structuredClone(A(u.userData))},M=l=>l==="subscriber"?{color:"warning",icon:"tabler-user"}:l==="author"?{color:"success",icon:"tabler-circle-check"}:l==="maintainer"?{color:"primary",icon:"tabler-chart-pie-2"}:l==="editor"?{color:"info",icon:"tabler-pencil"}:l==="admin"?{color:"secondary",icon:"tabler-server-2"}:{color:"primary",icon:"tabler-user"};return(l,t)=>(I(),P(y,null,{default:a(()=>[e(N,{location:"top",modelValue:s(h),"onUpdate:modelValue":t[1]||(t[1]=o=>j(h)?h.value=o:null)},{actions:a(()=>[e(k,{color:"success",onClick:t[0]||(t[0]=o=>h.value=!1)},{default:a(()=>[b(d(l.$t("Close")),1)]),_:1})]),default:a(()=>[b(d(l.$t("Done"))+" ",1)]),_:1},8,["modelValue"]),e(N,{color:"error",location:"top",modelValue:s(C),"onUpdate:modelValue":t[3]||(t[3]=o=>j(C)?C.value=o:null)},{actions:a(()=>[e(k,{color:"success",onClick:t[2]||(t[2]=o=>C.value=!1)},{default:a(()=>[b(d(l.$t("Close")),1)]),_:1})]),default:a(()=>[b(d(l.errors)+" ",1)]),_:1},8,["modelValue"]),e(m,{cols:"12"},{default:a(()=>[u.userData?(I(),P(F,{key:0},{default:a(()=>[e(w,{class:"text-center pt-15"},{default:a(()=>[e(L,{rounded:"",size:120,color:"primary",variant:"tonal"},{default:a(()=>[u.userData.avatar?(I(),P(ne,{key:0,src:u.userData.avatar},null,8,["src"])):(I(),W("span",fe,d(s(oe)(u.userData.name)),1))]),_:1}),g("h6",pe,d(u.userData.name),1),e(ue,{label:"",color:M(u.userData.role).color,size:"small",class:"text-capitalize mt-4"},{default:a(()=>[b(d(l.$t(u.userData.role)),1)]),_:1},8,["color"])]),_:1}),e(ie),e(se,{class:"text-center"},{default:a(()=>[e(re,{class:"text-h5 mb-3"},{default:a(()=>[b(d(l.$t("Edit User Information")),1)]),_:1})]),_:1}),e(w,null,{default:a(()=>[e(R,{ref_key:"refForm",ref:T,class:"mt-6",onSubmit:Z(J,["prevent"])},{default:a(()=>[e(y,null,{default:a(()=>[e(m,{cols:"12"},{default:a(()=>[e(F,{title:l.$t("avatar")},{default:a(()=>[e(w,{class:"d-flex"},{default:a(()=>[e(L,{rounded:"",size:"100",class:"me-6",image:s(r).avatar},null,8,["image"]),g("form",_e,[g("div",be,[e(k,{color:"primary",onClick:t[4]||(t[4]=o=>{var x;return(x=s(f))==null?void 0:x.click()})},{default:a(()=>[e(ee,{icon:"tabler-cloud-upload",class:"d-sm-none"}),g("span",ve,d(l.$t("slider_back_img")),1)]),_:1}),g("input",{ref_key:"refInputEl_front",ref:f,type:"file",name:"file_back",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:O},null,544)]),Ve],512)]),_:1})]),_:1},8,["title"])]),_:1}),e(m,{cols:"12"},{default:a(()=>[e(F,{title:l.$t("basic_information")},{default:a(()=>[e(R,null,{default:a(()=>[e(w,{class:"pt-0"},{default:a(()=>[e(y,null,{default:a(()=>[e(m,{cols:"12",md:"6"},{default:a(()=>[e(S,{modelValue:s(r).first_name,"onUpdate:modelValue":t[5]||(t[5]=o=>s(r).first_name=o),label:s(_)("first_name"),rules:[V]},null,8,["modelValue","label","rules"])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[e(S,{modelValue:s(r).last_name,"onUpdate:modelValue":t[6]||(t[6]=o=>s(r).last_name=o),label:s(_)("last_name"),rules:[V]},null,8,["modelValue","label","rules"])]),_:1})]),_:1}),e(y,null,{default:a(()=>[e(m,{cols:"12",md:"6"},{default:a(()=>[e(S,{modelValue:s(r).email,"onUpdate:modelValue":t[7]||(t[7]=o=>s(r).email=o),label:l.$t("email"),rules:[V]},null,8,["modelValue","label","rules"])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[e(S,{modelValue:s(r).mobile,"onUpdate:modelValue":t[8]||(t[8]=o=>s(r).mobile=o),label:l.$t("mobile"),rules:[V]},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),e(m,{cols:"12"},{default:a(()=>[e(F,{title:l.$t("Change_Password")},{default:a(()=>[e(R,null,{default:a(()=>[e(w,{class:"pt-0"},{default:a(()=>[e(y,null,{default:a(()=>[e(m,{cols:"12",md:"6"},{default:a(()=>[e(S,{modelValue:s(D),"onUpdate:modelValue":t[9]||(t[9]=o=>j(D)?D.value=o:null),type:s(v)?"text":"password","append-inner-icon":s(v)?"tabler-eye-off":"tabler-eye",label:s(_)("New Password"),"onClick:appendInner":t[10]||(t[10]=o=>v.value=!s(v))},null,8,["modelValue","type","append-inner-icon","label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),e(m,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:a(()=>[e(k,{type:"submit",loading:s(U),disabled:s($)},{default:a(()=>[b(d(l.$t("Save changes")),1)]),_:1},8,["loading","disabled"]),e(k,{color:"secondary",variant:"tonal",onClick:K},{default:a(()=>[b(d(l.$t("Cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})):q("",!0)]),_:1})]),_:1}))}},ye=H(ge,[["__scopeId","data-v-0627f019"]]),he={__name:"my",setup(c){const u=me(),f=E(),p=i(),_=JSON.parse(localStorage.getItem("userData")||"null"),V=_&&_.id?_.id:null;return le(f,()=>{u.getSingleUser(Number(V)).then(v=>{p.value=v.data})},{immediate:!0}),(v,D)=>s(p)?(I(),P(y,{key:0},{default:a(()=>[e(m,{cols:"12",lg:"12"},{default:a(()=>[e(ye,{"user-data":s(p)},null,8,["user-data"])]),_:1})]),_:1})):q("",!0)}};typeof z=="function"&&z(he);export{he as default};

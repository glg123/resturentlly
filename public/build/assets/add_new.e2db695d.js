import{U as d,s as r,aP as K,ai as W,o as H,f as O,w as t,g as l,C as v,j as m,e as s,z as n,i as b,y as Q,bf as X,be as Y,W as Z}from"./main.e5722c22.js";import{e as ee,a as le,d as ae}from"./validators.330a354f.js";import{b as h}from"./route-block.2f1a6263.js";import{V as U}from"./VBtn.4327307d.js";import{V as q}from"./VSnackbar.dc45fad4.js";import{V as oe,c as B}from"./VCard.2abcdcfe.js";import{V as te}from"./VForm.be976fbe.js";import{V as E,a as u}from"./VRow.f8de802a.js";import{V as se}from"./VAvatar.1bc59f66.js";import{V}from"./VTextField.c7d5535f.js";import{V as G}from"./VSelect.23e06609.js";import"./index.b522f886.js";import"./router.f3c33ba4.js";import"./position.fb77405d.js";import"./scopeId.23faa331.js";import"./forwardRefs.c003b6b8.js";import"./VOverlay.ed5a8d46.js";import"./lazy.d1bb34b2.js";import"./easing.36b781ab.js";import"./VImg.a33717ea.js";import"./VInput.1a6e2ae8.js";import"./index.19c19380.js";/* empty css                   */import"./VField.01372b27.js";import"./VCounter.bc3c6bfa.js";import"./VList.345ceaa4.js";import"./VDivider.19cd6d54.js";import"./dialog-transition.738c368f.js";import"./VMenu.1340a45a.js";import"./VCheckboxBtn.d3981e2f.js";import"./VSelectionControl.336d6e11.js";import"./VChip.f64a01b2.js";const re={ref:"refForm_front",class:"d-flex flex-column justify-center gap-4"},ue={class:"d-flex flex-wrap gap-2"},ne={class:"d-none d-sm-block"},de=b("p",{class:"text-body-1 mb-0"}," Allowed JPG, GIF or PNG. Max size of 800K ",-1),me={__name:"add_new",setup(ie){const T=Y(),A=Z();let R=localStorage.getItem("accessToken");d.defaults.headers.common["Content-Type"]="application/json",d.defaults.headers.common.Accept="application/json",d.defaults.headers.common.Language="ar",d.defaults.headers.common.type="Admin",d.defaults.headers.common.auth="token "+R;const i=o=>String(o).trim().length==0?C("This field is required"):!0,P=r(""),z=()=>{var o;(o=x.value)==null||o.validate().then(({valid:e})=>{console.log(e),e&&(S.value=!0,F.value=!0,d.post("add/admins",{name:g.value,mobile:k.value,password:f.value,email:w.value,admin_role_id:y.value,status:$.value,avatar:I.value,token:R}).then(a=>{console.log(a.data),p.value=!0,S.value=!1,F.value=!1,A.replace(T.query.to?String(T.query.to):"/admin/apps/admins/list/")}).catch(a=>{console.log(a.response.data.message),P.value=a.response.data.message,c.value=!0,S.value=!1,F.value=!1}))})},g=r(""),k=r(""),L=r(""),f=r(""),_=r(""),w=r(""),x=r(),y=r(),$=r(),I=r(),{t:C}=K(),j=r([]),M=[{title:C("block"),value:"block"},{title:C("active"),value:"active"},{title:C("not_active"),value:"not_active"}],D=r(),p=r(!1),c=r(!1),F=r(!1),S=r(!1),J=o=>{const e=new FileReader,{files:a}=o.target;a&&a.length&&(e.readAsDataURL(a[0]),e.onload=()=>{typeof e.result=="string"&&(I.value=e.result)})};return W(A,()=>{d.get("/roles/select",{token:R}).then(o=>{for(var e=0;e<o.data.length;e++)console.log(o.data[e].id,"res"),console.log(o.data[e].role_name,"res"),j.value[e]={title:o.data[e].role_name,value:o.data[e].id};console.log(j.value,"res")})},{immediate:!0}),(o,e)=>(H(),O(E,null,{default:t(()=>[l(q,{location:"top",modelValue:s(p),"onUpdate:modelValue":e[1]||(e[1]=a=>n(p)?p.value=a:null)},{actions:t(()=>[l(U,{color:"success",onClick:e[0]||(e[0]=a=>p.value=!1)},{default:t(()=>[v(m(o.$t("Close")),1)]),_:1})]),default:t(()=>[v(m(o.$t("Done"))+" ",1)]),_:1},8,["modelValue"]),l(q,{color:"error",location:"top",modelValue:s(c),"onUpdate:modelValue":e[3]||(e[3]=a=>n(c)?c.value=a:null)},{actions:t(()=>[l(U,{color:"success",onClick:e[2]||(e[2]=a=>c.value=!1)},{default:t(()=>[v(m(o.$t("Close")),1)]),_:1})]),default:t(()=>[v(m(s(P))+" ",1)]),_:1},8,["modelValue"]),l(u,{cols:"12"},{default:t(()=>[l(oe,{title:o.$t("AddNew")},{default:t(()=>[l(B,{class:"pt-2"},{default:t(()=>[l(te,{ref_key:"refForm",ref:x,class:"mt-6"},{default:t(()=>[l(E,null,{default:t(()=>[l(u,{md:"12",cols:"12"},{default:t(()=>[l(B,{class:"d-flex"},{default:t(()=>[l(se,{rounded:"",size:"100",class:"me-6",image:s(I)},null,8,["image"]),b("form",re,[b("div",ue,[l(U,{color:"primary",onClick:e[4]||(e[4]=a=>{var N;return(N=s(D))==null?void 0:N.click()})},{default:t(()=>[l(Q,{icon:"tabler-cloud-upload",class:"d-sm-none"}),b("span",ne,m(o.$t("slider_back_img")),1)]),_:1}),b("input",{ref_key:"refInputEl_front",ref:D,type:"file",name:"file_back",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:J},null,544)]),de],512)]),_:1})]),_:1}),l(u,{md:"6",cols:"12"},{default:t(()=>[l(V,{modelValue:s(g),"onUpdate:modelValue":e[5]||(e[5]=a=>n(g)?g.value=a:null),label:o.$t("Full_name"),rules:[i]},null,8,["modelValue","label","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(V,{modelValue:s(w),"onUpdate:modelValue":e[6]||(e[6]=a=>n(w)?w.value=a:null),label:o.$t("email"),rules:[i,s(ee)]},null,8,["modelValue","label","rules"])]),_:1}),l(u,{md:"6",cols:"12"},{default:t(()=>[l(G,{modelValue:s(y),"onUpdate:modelValue":e[7]||(e[7]=a=>n(y)?y.value=a:null),label:o.$t("Select Role"),items:s(j),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","label","items"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(V,{modelValue:s(k),"onUpdate:modelValue":e[8]||(e[8]=a=>n(k)?k.value=a:null),label:o.$t("mobile"),rules:[i,s(le)(s(L),"^([0-9]+)$")]},null,8,["modelValue","label","rules"])]),_:1}),l(u,{md:"6",cols:"12"},{default:t(()=>[l(G,{modelValue:s($),"onUpdate:modelValue":e[9]||(e[9]=a=>n($)?$.value=a:null),label:o.$t("Select Status"),items:M,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","label"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(V,{modelValue:s(f),"onUpdate:modelValue":e[10]||(e[10]=a=>n(f)?f.value=a:null),label:o.$t("password"),type:"password",rules:[i],autocomplete:"on"},null,8,["modelValue","label","rules"])]),_:1}),l(u,{cols:"12",md:"6"},{default:t(()=>[l(V,{modelValue:s(_),"onUpdate:modelValue":e[11]||(e[11]=a=>n(_)?_.value=a:null),label:o.$t("password_confirm"),type:"password",rules:[i,s(ae)(s(_),s(f))],autocomplete:"on"},null,8,["modelValue","label","rules"])]),_:1}),l(u,{cols:"12"},{default:t(()=>[l(U,{type:"submit",loading:s(S),disabled:s(F),onClick:X(z,["prevent"])},{default:t(()=>[v(m(o.$t("Save changes")),1)]),_:1},8,["loading","disabled","onClick"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["title"])]),_:1})]),_:1}))}};typeof h=="function"&&h(me);export{me as default};

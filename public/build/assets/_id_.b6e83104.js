import{s as i,c as M,U as r,aP as W,ai as U,o as h,f as B,w as o,g as t,C as v,j as V,e as s,z as b,i as G,l as H,B as J,F as K,bf as O,be as Q,W as X}from"./main.e5722c22.js";import{u as Y}from"./useAdminListStore.251ab28b.js";/* empty css                                                                     */import{b as F}from"./route-block.2f1a6263.js";import{V as S}from"./VBtn.4327307d.js";import{V as j}from"./VSnackbar.dc45fad4.js";import{V as w,c as A}from"./VCard.2abcdcfe.js";import{V as Z}from"./VForm.be976fbe.js";import{V as D,a as d}from"./VRow.f8de802a.js";import{V as N}from"./VTextField.c7d5535f.js";import{V as ee}from"./VSelect.23e06609.js";import{V as R}from"./VCheckbox.7ee7e993.js";import"./router.f3c33ba4.js";import"./position.fb77405d.js";import"./scopeId.23faa331.js";import"./forwardRefs.c003b6b8.js";import"./VOverlay.ed5a8d46.js";import"./lazy.d1bb34b2.js";import"./easing.36b781ab.js";import"./VImg.a33717ea.js";import"./VAvatar.1bc59f66.js";import"./VInput.1a6e2ae8.js";import"./index.19c19380.js";/* empty css                   */import"./VField.01372b27.js";import"./VCounter.bc3c6bfa.js";import"./VList.345ceaa4.js";import"./VDivider.19cd6d54.js";import"./dialog-transition.738c368f.js";import"./VMenu.1340a45a.js";import"./VCheckboxBtn.d3981e2f.js";import"./VSelectionControl.336d6e11.js";import"./VChip.f64a01b2.js";const le={class:"demo-space-x"},ae={__name:"[id]",setup(te){Y();const m=Q(),$=i([]),n=i([]),q=X(),{isAppRtl:L}=M();let g=localStorage.getItem("accessToken");r.defaults.headers.common["Content-Type"]="application/json",r.defaults.headers.common.Accept="application/json",L.value===!0?r.defaults.headers.common.Language="ar":r.defaults.headers.common.Language="en",r.defaults.headers.common.type="Admin",r.defaults.headers.common.role="Admin",r.defaults.headers.common.auth="Bearer "+g;const y=l=>String(l).trim().length===0?_("This field is required"):!0,u=i([]),P=()=>{r.get("/roles/"+Number(m.params.id)+"/get",{token:g}).then(l=>{n.value=l.data,p.value=l.data.status;for(var e=0;e<l.data.role_permissions.abilities.length;e++)l.data.role_permissions.abilities[e].subject=="all"?u.value.push(0):u.value.push(l.data.role_permissions.abilities[e].subject)})},I=()=>{r.get("/admins/permissions/list",{token:g}).then(l=>{$.value=l.data})},{t:_}=W(),p=i(),E=[{title:_("active"),value:"active"},{title:_("not_active"),value:"not_active"}],T=i(),f=i(!1),c=i(!1),k=i(!1),C=i(!1);U(m,P,{immediate:!0}),U(m,I,{immediate:!0});const x=()=>{var l;(l=T.value)==null||l.validate().then(({valid:e})=>{console.log(e),e&&(C.value=!0,k.value=!0,r.post("edit/"+Number(m.params.id)+"/roles/permissions",{role_name_ar:n.value.role_name_ar,role_name_en:n.value.role_name_en,status:p.value,permissions:u.value,token:g}).then(a=>{console.log(a.data),f.value=!0,C.value=!1,k.value=!1,q.replace(m.query.to?String(m.query.to):"/admin/apps/permission/list/")}).catch(a=>{console.log(a.response.data.message),errors.value=a.response.data.message,c.value=!0,C.value=!1,k.value=!1}))})};return(l,e)=>(h(),B(D,null,{default:o(()=>[t(j,{location:"top",modelValue:s(f),"onUpdate:modelValue":e[1]||(e[1]=a=>b(f)?f.value=a:null)},{actions:o(()=>[t(S,{color:"success",onClick:e[0]||(e[0]=a=>f.value=!1)},{default:o(()=>[v(V(l.$t("Close")),1)]),_:1})]),default:o(()=>[v(V(l.$t("Done"))+" ",1)]),_:1},8,["modelValue"]),t(j,{color:"error",location:"top",modelValue:s(c),"onUpdate:modelValue":e[3]||(e[3]=a=>b(c)?c.value=a:null)},{actions:o(()=>[t(S,{color:"success",onClick:e[2]||(e[2]=a=>c.value=!1)},{default:o(()=>[v(V(l.$t("Close")),1)]),_:1})]),default:o(()=>[v(V(l.errors)+" ",1)]),_:1},8,["modelValue"]),t(d,{cols:"12"},{default:o(()=>[t(w,{title:l.$t("AddNew")},{default:o(()=>[t(A,{class:"pt-2"},{default:o(()=>[t(Z,{ref_key:"refForm",ref:T,class:"mt-6"},{default:o(()=>[t(D,null,{default:o(()=>[t(d,{md:"6",cols:"12"},{default:o(()=>[t(N,{modelValue:s(n).role_name_ar,"onUpdate:modelValue":e[4]||(e[4]=a=>s(n).role_name_ar=a),label:l.$t("title_ar"),rules:[y]},null,8,["modelValue","label","rules"])]),_:1}),t(d,{md:"6",cols:"12"},{default:o(()=>[t(N,{modelValue:s(n).role_name_en,"onUpdate:modelValue":e[5]||(e[5]=a=>s(n).role_name_en=a),label:l.$t("title_en"),rules:[y]},null,8,["modelValue","label","rules"])]),_:1}),t(d,{md:"6",cols:"12"},{default:o(()=>[t(ee,{modelValue:s(p),"onUpdate:modelValue":e[6]||(e[6]=a=>b(p)?p.value=a:null),label:l.$t("Select Status"),items:E,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","label"])]),_:1}),t(d,{cols:"12"},{default:o(()=>[t(w,{title:l.$t("roles")},{default:o(()=>[t(A,{class:"pt-0"},{default:o(()=>[G("div",le,[t(R,{modelValue:s(u),"onUpdate:modelValue":e[7]||(e[7]=a=>b(u)?u.value=a:null),label:s(_)("all"),value:0},null,8,["modelValue","label"]),(h(!0),H(K,null,J(s($),a=>(h(),B(R,{key:a.id,modelValue:s(u),"onUpdate:modelValue":e[8]||(e[8]=z=>b(u)?u.value=z:null),label:a.title,value:a.slug},null,8,["modelValue","label","value"]))),128))])]),_:1})]),_:1},8,["title"])]),_:1}),t(d,{cols:"12"},{default:o(()=>[t(S,{type:"submit",loading:s(C),disabled:s(k),onClick:O(x,["prevent"])},{default:o(()=>[v(V(l.$t("Save changes")),1)]),_:1},8,["loading","disabled","onClick"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["title"])]),_:1})]),_:1}))}};typeof F=="function"&&F(ae);export{ae as default};

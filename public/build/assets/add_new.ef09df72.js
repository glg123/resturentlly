import{s,c as K,U as d,aP as W,o as H,f as O,w as o,g as l,C as V,j as i,e as u,z as r,i as g,y as Q,bf as X,be as Y,W as Z}from"./main.e5722c22.js";import{b as q}from"./route-block.2f1a6263.js";import{V as F}from"./VBtn.4327307d.js";import{V as G}from"./VSnackbar.dc45fad4.js";import{V as ee,c as L}from"./VCard.2abcdcfe.js";import{V as le}from"./VForm.be976fbe.js";import{V as z,a as n}from"./VRow.f8de802a.js";import{V as ae}from"./VAvatar.1bc59f66.js";import{V as p}from"./VTextField.c7d5535f.js";import{V as D}from"./VSelect.23e06609.js";import"./router.f3c33ba4.js";import"./position.fb77405d.js";import"./scopeId.23faa331.js";import"./forwardRefs.c003b6b8.js";import"./VOverlay.ed5a8d46.js";import"./lazy.d1bb34b2.js";import"./easing.36b781ab.js";import"./VImg.a33717ea.js";import"./VInput.1a6e2ae8.js";import"./index.19c19380.js";/* empty css                   */import"./VField.01372b27.js";import"./VCounter.bc3c6bfa.js";import"./VList.345ceaa4.js";import"./VDivider.19cd6d54.js";import"./dialog-transition.738c368f.js";import"./VMenu.1340a45a.js";import"./VCheckboxBtn.d3981e2f.js";import"./VSelectionControl.336d6e11.js";import"./VChip.f64a01b2.js";const oe={ref:"refForm_front",class:"d-flex flex-column justify-center gap-4"},te={class:"d-flex flex-wrap gap-2"},se={class:"d-none d-sm-block"},ue=g("p",{class:"text-body-1 mb-0"}," Allowed JPG, GIF or PNG. Max size of 800K ",-1),ne={__name:"add_new",setup(re){const A=Y(),E=Z();s([]),s([]);const{isAppRtl:P}=K();let R=localStorage.getItem("accessToken");d.defaults.headers.common["Content-Type"]="application/json",d.defaults.headers.common.Accept="application/json",P.value===!0?d.defaults.headers.common.Language="ar":d.defaults.headers.common.Language="en",d.defaults.headers.common.type="Admin",d.defaults.headers.common.role="Admin",d.defaults.headers.common.auth="Bearer "+R;const m=t=>String(t).trim().length==0?f("This field is required"):!0,b=s(""),_=s(""),I=s(""),y=s("0"),$=s("0"),k=s("0"),C=s("0"),j=s(),U=s(),S=s(),{t:f}=W(),h=[{title:f("active"),value:"active"},{title:f("not_active"),value:"not_active"}],M=[{title:f("free"),value:"free"},{title:f("paid"),value:"paid"}],c=s(!1),v=s(!1),T=s(!1),w=s(!1),B=s(),x=t=>{const e=new FileReader,{files:a}=t.target;a&&a.length&&(e.readAsDataURL(a[0]),e.onload=()=>{typeof e.result=="string"&&(I.value=e.result)})},J=()=>{var t;(t=j.value)==null||t.validate().then(({valid:e})=>{console.log(e),e&&(w.value=!0,T.value=!0,d.post("add/plans",{name_en:_.value,name_ar:b.value,price:y.value,count_emp:$.value,count_branch:k.value,count_interval:C.value,logo:I.value,status:U.value,type:S.value,token:R}).then(a=>{console.log(a.data),c.value=!0,w.value=!1,T.value=!1,E.replace(A.query.to?String(A.query.to):"/admin/apps/plans/list/")}).catch(a=>{console.log(a.response.data.message),errors.value=a.response.data.message,v.value=!0,w.value=!1,T.value=!1}))})};return(t,e)=>(H(),O(z,null,{default:o(()=>[l(G,{location:"top",modelValue:u(c),"onUpdate:modelValue":e[1]||(e[1]=a=>r(c)?c.value=a:null)},{actions:o(()=>[l(F,{color:"success",onClick:e[0]||(e[0]=a=>c.value=!1)},{default:o(()=>[V(i(t.$t("Close")),1)]),_:1})]),default:o(()=>[V(i(t.$t("Done"))+" ",1)]),_:1},8,["modelValue"]),l(G,{color:"error",location:"top",modelValue:u(v),"onUpdate:modelValue":e[3]||(e[3]=a=>r(v)?v.value=a:null)},{actions:o(()=>[l(F,{color:"success",onClick:e[2]||(e[2]=a=>v.value=!1)},{default:o(()=>[V(i(t.$t("Close")),1)]),_:1})]),default:o(()=>[V(i(t.errors)+" ",1)]),_:1},8,["modelValue"]),l(n,{cols:"12"},{default:o(()=>[l(ee,{title:t.$t("AddNew")},{default:o(()=>[l(L,{class:"pt-2"},{default:o(()=>[l(le,{ref_key:"refForm",ref:j,class:"mt-6"},{default:o(()=>[l(z,null,{default:o(()=>[l(n,{md:"12",cols:"12"},{default:o(()=>[l(L,{class:"d-flex"},{default:o(()=>[l(ae,{rounded:"",size:"100",class:"me-6",image:u(I)},null,8,["image"]),g("form",oe,[g("div",te,[l(F,{color:"primary",onClick:e[4]||(e[4]=a=>{var N;return(N=u(B))==null?void 0:N.click()})},{default:o(()=>[l(Q,{icon:"tabler-cloud-upload",class:"d-sm-none"}),g("span",se,i(t.$t("logo")),1)]),_:1}),g("input",{ref_key:"refInputEl_logo",ref:B,type:"file",name:"file_back",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:x},null,544)]),ue],512)]),_:1})]),_:1}),l(n,{md:"6",cols:"12"},{default:o(()=>[l(p,{modelValue:u(b),"onUpdate:modelValue":e[5]||(e[5]=a=>r(b)?b.value=a:null),label:t.$t("name_ar"),rules:[m]},null,8,["modelValue","label","rules"])]),_:1}),l(n,{md:"6",cols:"12"},{default:o(()=>[l(p,{modelValue:u(_),"onUpdate:modelValue":e[6]||(e[6]=a=>r(_)?_.value=a:null),label:t.$t("name_en"),rules:[m]},null,8,["modelValue","label","rules"])]),_:1}),l(n,{md:"6",cols:"12"},{default:o(()=>[l(p,{modelValue:u(y),"onUpdate:modelValue":e[7]||(e[7]=a=>r(y)?y.value=a:null),label:t.$t("price"),rules:[m]},null,8,["modelValue","label","rules"])]),_:1}),l(n,{md:"6",cols:"12"},{default:o(()=>[l(p,{modelValue:u($),"onUpdate:modelValue":e[8]||(e[8]=a=>r($)?$.value=a:null),label:t.$t("count_emp"),rules:[m]},null,8,["modelValue","label","rules"])]),_:1}),l(n,{md:"6",cols:"12"},{default:o(()=>[l(p,{modelValue:u(C),"onUpdate:modelValue":e[9]||(e[9]=a=>r(C)?C.value=a:null),label:t.$t("count_interval"),rules:[m]},null,8,["modelValue","label","rules"])]),_:1}),l(n,{md:"6",cols:"12"},{default:o(()=>[l(p,{modelValue:u(k),"onUpdate:modelValue":e[10]||(e[10]=a=>r(k)?k.value=a:null),label:t.$t("count_branch"),rules:[m]},null,8,["modelValue","label","rules"])]),_:1}),l(n,{md:"6",cols:"12"},{default:o(()=>[l(D,{modelValue:u(U),"onUpdate:modelValue":e[11]||(e[11]=a=>r(U)?U.value=a:null),label:t.$t("Select Status"),items:h,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","label"])]),_:1}),l(n,{md:"6",cols:"12"},{default:o(()=>[l(D,{modelValue:u(S),"onUpdate:modelValue":e[12]||(e[12]=a=>r(S)?S.value=a:null),label:t.$t("Select Type"),items:M,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","label"])]),_:1}),l(n,{cols:"12"},{default:o(()=>[l(F,{type:"submit",loading:u(w),disabled:u(T),onClick:X(J,["prevent"])},{default:o(()=>[V(i(t.$t("Save changes")),1)]),_:1},8,["loading","disabled","onClick"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["title"])]),_:1})]),_:1}))}};typeof q=="function"&&q(ne);export{ne as default};

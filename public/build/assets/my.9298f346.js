import{K as Y,c as H,s as n,aP as Q,be as q,U as f,bF as N,o as h,f as x,w as a,g as e,e as s,z as B,C as c,j as i,l as W,i as v,bf as Z,y as ee,p as G,X as ae,Y as te,ai as le}from"./main.e5722c22.js";import{u as oe}from"./useClientListStore.f3acc71d.js";import{a as se}from"./formatters.ab6dea15.js";import{b as F}from"./route-block.2f1a6263.js";import{V as z}from"./VSnackbar.dc45fad4.js";import{V as k}from"./VBtn.4327307d.js";import{a as d,V}from"./VRow.f8de802a.js";import{V as P,c as w,a as re,b as ne}from"./VCard.2abcdcfe.js";import{V as E}from"./VAvatar.1bc59f66.js";import{V as ue}from"./VImg.a33717ea.js";import{V as ie}from"./VChip.f64a01b2.js";import{V as de}from"./VDivider.19cd6d54.js";import{V as L}from"./VForm.be976fbe.js";import{V as C}from"./VTextField.c7d5535f.js";import{V as me}from"./VSelect.23e06609.js";import"./index.b522f886.js";import"./router.f3c33ba4.js";import"./position.fb77405d.js";import"./scopeId.23faa331.js";import"./forwardRefs.c003b6b8.js";import"./VOverlay.ed5a8d46.js";import"./lazy.d1bb34b2.js";import"./easing.36b781ab.js";import"./index.19c19380.js";import"./VInput.1a6e2ae8.js";/* empty css                   */import"./VField.01372b27.js";import"./VCounter.bc3c6bfa.js";import"./VList.345ceaa4.js";import"./dialog-transition.738c368f.js";import"./VMenu.1340a45a.js";import"./VCheckboxBtn.d3981e2f.js";import"./VSelectionControl.336d6e11.js";const fe=p=>(ae("data-v-b1b4a974"),p=p(),te(),p),ce={key:1,class:"text-5xl font-weight-semibold"},pe={class:"text-h6 mt-4"},_e={ref:"refForm_front",class:"d-flex flex-column justify-center gap-4"},be={class:"d-flex flex-wrap gap-2"},ve={class:"d-none d-sm-block"},Ve=fe(()=>v("p",{class:"text-body-1 mb-0"}," Allowed JPG, GIF or PNG. Max size of 800K ",-1)),O={__name:"UserBioPanel",props:{userData:{type:Object,required:!0},roles:{type:Object,required:!0}},setup(p){const u=p,{isAppRtl:R}=H(),_=n(),b=n(),{t:D}=Q(),m=o=>String(o).trim().length===0?D("This field is required"):!0,T=n();q();const I=n(!1);n(!1);const j=n("");n("");const g=n(!1),y=n(!1),S=n(!1),$=n(!1),J=o=>{const t=new FileReader,{files:l}=o.target;l&&l.length&&(t.readAsDataURL(l[0]),t.onload=()=>{typeof t.result=="string"&&(r.value.avatar=t.result)})};let A=localStorage.getItem("accessToken");f.defaults.headers.common["Content-Type"]="application/json",f.defaults.headers.common.Accept="application/json",R.value===!0?f.defaults.headers.common.Language="ar":f.defaults.headers.common.Language="en",f.defaults.headers.common.type="User",f.defaults.headers.common.role="user",f.defaults.headers.common.auth="Bearer "+A;const r=n(structuredClone(N(u.userData)));b.value=r.value.admin_role_id;const K=()=>{var o;(o=T.value)==null||o.validate().then(({valid:t})=>{console.log(t),t&&($.value=!0,S.value=!0,f.post("admins/"+u.userData.id,{name:r.value.name,email:r.value.email,mobile:r.value.mobile,avatar:r.value.avatar,status:r.value.status,password:r.value.password,admin_role_id:b.value,token:A}).then(l=>{g.value=!0,$.value=!1,S.value=!1,console.log(l.response)}).catch(l=>{const{errors:U}=l.response.data;y.value=!0,$.value=!1,S.value=!1,errors.value=U,console.error(l.response.data)}))})},M=()=>{r.value=structuredClone(N(u.userData))},X=o=>o==="subscriber"?{color:"warning",icon:"tabler-user"}:o==="author"?{color:"success",icon:"tabler-circle-check"}:o==="maintainer"?{color:"primary",icon:"tabler-chart-pie-2"}:o==="editor"?{color:"info",icon:"tabler-pencil"}:o==="admin"?{color:"secondary",icon:"tabler-server-2"}:{color:"primary",icon:"tabler-user"};return(o,t)=>(h(),x(V,null,{default:a(()=>[e(z,{location:"top",modelValue:s(g),"onUpdate:modelValue":t[1]||(t[1]=l=>B(g)?g.value=l:null)},{actions:a(()=>[e(k,{color:"success",onClick:t[0]||(t[0]=l=>g.value=!1)},{default:a(()=>[c(i(o.$t("Close")),1)]),_:1})]),default:a(()=>[c(i(o.$t("Done"))+" ",1)]),_:1},8,["modelValue"]),e(z,{color:"error",location:"top",modelValue:s(y),"onUpdate:modelValue":t[3]||(t[3]=l=>B(y)?y.value=l:null)},{actions:a(()=>[e(k,{color:"success",onClick:t[2]||(t[2]=l=>y.value=!1)},{default:a(()=>[c(i(o.$t("Close")),1)]),_:1})]),default:a(()=>[c(i(o.errors)+" ",1)]),_:1},8,["modelValue"]),e(d,{cols:"12"},{default:a(()=>[u.userData?(h(),x(P,{key:0},{default:a(()=>[e(w,{class:"text-center pt-15"},{default:a(()=>[e(E,{rounded:"",size:120,color:"primary",variant:"tonal"},{default:a(()=>[u.userData.avatar?(h(),x(ue,{key:0,src:u.userData.avatar},null,8,["src"])):(h(),W("span",ce,i(s(se)(u.userData.first_name)),1))]),_:1}),v("h6",pe,i(u.userData.first_name),1),e(ie,{label:"",color:X(u.userData.role).color,size:"small",class:"text-capitalize mt-4"},{default:a(()=>[c(i(o.$t(u.userData.role)),1)]),_:1},8,["color"])]),_:1}),e(de),e(re,{class:"text-center"},{default:a(()=>[e(ne,{class:"text-h5 mb-3"},{default:a(()=>[c(i(o.$t("Edit User Information")),1)]),_:1})]),_:1}),e(w,null,{default:a(()=>[e(L,{ref_key:"refForm",ref:T,class:"mt-6",onSubmit:Z(K,["prevent"])},{default:a(()=>[e(V,null,{default:a(()=>[e(d,{cols:"12"},{default:a(()=>[e(P,{title:o.$t("avatar")},{default:a(()=>[e(w,{class:"d-flex"},{default:a(()=>[e(E,{rounded:"",size:"100",class:"me-6",image:s(r).avatar},null,8,["image"]),v("form",_e,[v("div",be,[e(k,{color:"primary",onClick:t[4]||(t[4]=l=>{var U;return(U=s(_))==null?void 0:U.click()})},{default:a(()=>[e(ee,{icon:"tabler-cloud-upload",class:"d-sm-none"}),v("span",ve,i(o.$t("slider_back_img")),1)]),_:1}),v("input",{ref_key:"refInputEl_front",ref:_,type:"file",name:"file_back",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:J},null,544)]),Ve],512)]),_:1})]),_:1},8,["title"])]),_:1}),e(d,{cols:"12"},{default:a(()=>[e(P,{title:o.$t("basic_information")},{default:a(()=>[e(L,null,{default:a(()=>[e(w,{class:"pt-0"},{default:a(()=>[e(V,null,{default:a(()=>[e(d,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:s(r).first_name,"onUpdate:modelValue":t[5]||(t[5]=l=>s(r).first_name=l),label:s(D)("first_name"),rules:[m]},null,8,["modelValue","label","rules"])]),_:1}),e(d,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:s(r).last_name,"onUpdate:modelValue":t[6]||(t[6]=l=>s(r).last_name=l),label:s(D)("last_name"),rules:[m]},null,8,["modelValue","label","rules"])]),_:1}),e(d,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:s(r).email,"onUpdate:modelValue":t[7]||(t[7]=l=>s(r).email=l),label:o.$t("email"),rules:[m]},null,8,["modelValue","label","rules"])]),_:1})]),_:1}),e(V,null,{default:a(()=>[e(d,{cols:"12",md:"6"},{default:a(()=>[e(me,{modelValue:s(r).status,"onUpdate:modelValue":t[8]||(t[8]=l=>s(r).status=l),chips:"",label:o.$t("status"),rules:[m],items:["active","not_active","block"]},null,8,["modelValue","label","rules"])]),_:1}),e(d,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:s(r).mobile,"onUpdate:modelValue":t[9]||(t[9]=l=>s(r).mobile=l),label:o.$t("mobile"),rules:[m]},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),e(w,null,{default:a(()=>[e(V,null,{default:a(()=>[e(d,{cols:"12",md:"6"},{default:a(()=>[e(C,{modelValue:s(j),"onUpdate:modelValue":t[10]||(t[10]=l=>B(j)?j.value=l:null),type:s(I)?"text":"password","append-inner-icon":s(I)?"tabler-eye-off":"tabler-eye",label:"New Password","onClick:appendInner":t[11]||(t[11]=l=>I.value=!s(I))},null,8,["modelValue","type","append-inner-icon"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),e(d,{cols:"12",class:"d-flex flex-wrap justify-center gap-4"},{default:a(()=>[e(k,{type:"submit",loading:s($),disabled:s(S)},{default:a(()=>[c(i(o.$t("Save changes")),1)]),_:1},8,["loading","disabled"]),e(k,{color:"secondary",variant:"tonal",onClick:M},{default:a(()=>[c(i(o.$t("Cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})):G("",!0)]),_:1})]),_:1}))}};typeof F=="function"&&F(O);const ge=Y(O,[["__scopeId","data-v-b1b4a974"]]),ye={__name:"my",setup(p){const u=oe(),R=q(),_=n(),b=JSON.parse(localStorage.getItem("userData")||"null");return b&&b.id&&b.id,le(R,()=>{u.getSingleUser().then(m=>{_.value=m.data})},{immediate:!0}),(m,T)=>s(_)?(h(),x(V,{key:0},{default:a(()=>[e(d,{cols:"12",lg:"12"},{default:a(()=>[e(ge,{"user-data":s(_)},null,8,["user-data"])]),_:1})]),_:1})):G("",!0)}};typeof F=="function"&&F(ye);export{ye as default};

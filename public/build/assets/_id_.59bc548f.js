import{s as u,U as i,aP as z,ai as F,o as S,f as T,w as o,g as t,C as v,j as V,e as s,z as b,i as M,l as W,B as G,F as H,bf as J,be as K,W as O}from"./main.e5722c22.js";import{u as Q}from"./useAdminListStore.251ab28b.js";/* empty css                                                                     */import{b as j}from"./route-block.2f1a6263.js";import{V as $}from"./VBtn.4327307d.js";import{V as w}from"./VSnackbar.dc45fad4.js";import{V as B,c as D}from"./VCard.2abcdcfe.js";import{V as X}from"./VForm.be976fbe.js";import{V as N,a as d}from"./VRow.f8de802a.js";import{V as R}from"./VTextField.c7d5535f.js";import{V as Y}from"./VSelect.23e06609.js";import{V as q}from"./VCheckbox.7ee7e993.js";import"./router.f3c33ba4.js";import"./position.fb77405d.js";import"./scopeId.23faa331.js";import"./forwardRefs.c003b6b8.js";import"./VOverlay.ed5a8d46.js";import"./lazy.d1bb34b2.js";import"./easing.36b781ab.js";import"./VImg.a33717ea.js";import"./VAvatar.1bc59f66.js";import"./VInput.1a6e2ae8.js";import"./index.19c19380.js";/* empty css                   */import"./VField.01372b27.js";import"./VCounter.bc3c6bfa.js";import"./VList.345ceaa4.js";import"./VDivider.19cd6d54.js";import"./dialog-transition.738c368f.js";import"./VMenu.1340a45a.js";import"./VCheckboxBtn.d3981e2f.js";import"./VSelectionControl.336d6e11.js";import"./VChip.f64a01b2.js";const Z={class:"demo-space-x"},ee={__name:"[id]",setup(le){Q();const m=K(),y=u([]),n=u([]),A=O();let g=localStorage.getItem("accessToken");i.defaults.headers.common["Content-Type"]="application/json",i.defaults.headers.common.Accept="application/json",i.defaults.headers.common.Language="ar",i.defaults.headers.common.type="Admin",i.defaults.headers.common.auth="token "+g;const h=l=>String(l).trim().length===0?_("This field is required"):!0,r=u([]),P=()=>{i.get("/roles/"+Number(m.params.id)+"/get",{token:g}).then(l=>{n.value=l.data,p.value=l.data.status;for(var e=0;e<l.data.role_permissions.abilities.length;e++)l.data.role_permissions.abilities[e].subject=="all"?r.value.push(0):r.value.push(l.data.role_permissions.abilities[e].subject)})},I=()=>{i.get("/admins/permissions/list",{token:g}).then(l=>{y.value=l.data})},{t:_}=z(),p=u(),L=[{title:_("active"),value:"active"},{title:_("not_active"),value:"not_active"}],U=u(),f=u(!1),c=u(!1),k=u(!1),C=u(!1);F(m,P,{immediate:!0}),F(m,I,{immediate:!0});const E=()=>{var l;(l=U.value)==null||l.validate().then(({valid:e})=>{console.log(e),e&&(C.value=!0,k.value=!0,i.post("edit/"+Number(m.params.id)+"/roles/permissions",{role_name_ar:n.value.role_name_ar,role_name_en:n.value.role_name_en,status:p.value,permissions:r.value,token:g}).then(a=>{console.log(a.data),f.value=!0,C.value=!1,k.value=!1,A.replace(m.query.to?String(m.query.to):"/admin/apps/permission/list/")}).catch(a=>{console.log(a.response.data.message),errors.value=a.response.data.message,c.value=!0,C.value=!1,k.value=!1}))})};return(l,e)=>(S(),T(N,null,{default:o(()=>[t(w,{location:"top",modelValue:s(f),"onUpdate:modelValue":e[1]||(e[1]=a=>b(f)?f.value=a:null)},{actions:o(()=>[t($,{color:"success",onClick:e[0]||(e[0]=a=>f.value=!1)},{default:o(()=>[v(V(l.$t("Close")),1)]),_:1})]),default:o(()=>[v(V(l.$t("Done"))+" ",1)]),_:1},8,["modelValue"]),t(w,{color:"error",location:"top",modelValue:s(c),"onUpdate:modelValue":e[3]||(e[3]=a=>b(c)?c.value=a:null)},{actions:o(()=>[t($,{color:"success",onClick:e[2]||(e[2]=a=>c.value=!1)},{default:o(()=>[v(V(l.$t("Close")),1)]),_:1})]),default:o(()=>[v(V(l.errors)+" ",1)]),_:1},8,["modelValue"]),t(d,{cols:"12"},{default:o(()=>[t(B,{title:l.$t("AddNew")},{default:o(()=>[t(D,{class:"pt-2"},{default:o(()=>[t(X,{ref_key:"refForm",ref:U,class:"mt-6"},{default:o(()=>[t(N,null,{default:o(()=>[t(d,{md:"6",cols:"12"},{default:o(()=>[t(R,{modelValue:s(n).role_name_ar,"onUpdate:modelValue":e[4]||(e[4]=a=>s(n).role_name_ar=a),label:l.$t("title_ar"),rules:[h]},null,8,["modelValue","label","rules"])]),_:1}),t(d,{md:"6",cols:"12"},{default:o(()=>[t(R,{modelValue:s(n).role_name_en,"onUpdate:modelValue":e[5]||(e[5]=a=>s(n).role_name_en=a),label:l.$t("title_en"),rules:[h]},null,8,["modelValue","label","rules"])]),_:1}),t(d,{md:"6",cols:"12"},{default:o(()=>[t(Y,{modelValue:s(p),"onUpdate:modelValue":e[6]||(e[6]=a=>b(p)?p.value=a:null),label:l.$t("Select Status"),items:L,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","label"])]),_:1}),t(d,{cols:"12"},{default:o(()=>[t(B,{title:l.$t("roles")},{default:o(()=>[t(D,{class:"pt-0"},{default:o(()=>[M("div",Z,[t(q,{modelValue:s(r),"onUpdate:modelValue":e[7]||(e[7]=a=>b(r)?r.value=a:null),label:s(_)("all"),value:0},null,8,["modelValue","label"]),(S(!0),W(H,null,G(s(y),a=>(S(),T(q,{key:a.id,modelValue:s(r),"onUpdate:modelValue":e[8]||(e[8]=x=>b(r)?r.value=x:null),label:a.title,value:a.slug},null,8,["modelValue","label","value"]))),128))])]),_:1})]),_:1},8,["title"])]),_:1}),t(d,{cols:"12"},{default:o(()=>[t($,{type:"submit",loading:s(C),disabled:s(k),onClick:J(E,["prevent"])},{default:o(()=>[v(V(l.$t("Save changes")),1)]),_:1},8,["loading","disabled","onClick"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["title"])]),_:1})]),_:1}))}};typeof j=="function"&&j(ee);export{ee as default};

import{s as C,x as D,ai as M,o as p,f as y,w as i,g as t,e as s,z as A,i as f,y as m,D as se,G as z,H as E,l as V,B as $,F as w,P as ie,be as oe,E as B,C as N,j as _,bf as b}from"./main.078a9716.js";import{u as ne,a as re,_ as de,b as me,c as ue}from"./EmailView.c7bbe7d7.js";import{u as ce,V as fe,a as pe}from"./useResponsiveSidebar.27bff377.js";import{f as ve}from"./formatters.ab6dea15.js";import{b as U}from"./route-block.2f1a6263.js";import{V as xe}from"./VNavigationDrawer.7686f4b4.js";import{V as he}from"./VCard.3afa8a52.js";import{V as c}from"./VBtn.e4c558dd.js";import{V as Ve}from"./VTextField.d8a7d912.js";import{V as F}from"./VDivider.cfe78da3.js";import{V as P}from"./VCheckbox.876e9264.js";import{V as T}from"./VMenu.60374e62.js";import{V as I,a as O,b as j}from"./VList.05852a98.js";import{V as q}from"./VSpacer.2ec040b3.js";import{V as G}from"./VBadge.6813a4b9.js";import{V as _e}from"./VAvatar.ecffb864.js";import{V as be}from"./VImg.cc893ccb.js";import"./VTextarea.9d8460b1.js";/* empty css                   */import"./VField.db9fd7d9.js";import"./index.8a0d3cc6.js";import"./VInput.a7f379dc.js";import"./router.4bb23ac0.js";import"./position.e83b1372.js";import"./easing.36b781ab.js";import"./forwardRefs.c003b6b8.js";import"./VCounter.3a24309c.js";import"./VChip.db307e22.js";import"./ssrBoot.64d4892f.js";import"./index.b522f886.js";import"./VCheckboxBtn.83e8d540.js";import"./VSelectionControl.af7cec95.js";import"./scopeId.a984c125.js";import"./VOverlay.c04acb7b.js";import"./lazy.5006f860.js";import"./dialog-transition.06e38ff2.js";const ge={class:"d-flex align-center"},ke={class:"py-2 px-5 d-flex items-center"},Ce=["onClick"],ye={class:"mx-2 text-body-1 font-weight-medium text-high-emphasis"},ze={class:"truncate"},Ee={class:"email-meta"},$e={class:"text-disabled ms-2"},we={class:"email-actions d-none"},Se={class:"py-4 px-5 text-center"},De=f("span",{class:"text-high-emphasis"},"No items found.",-1),Le=[De],Re={__name:"index",setup(Me){const{isLeftSidebarOpen:g}=ce(),v=oe(),o=ne(),{labels:H,resolveLabelColor:L,emailMoveToFolderActions:J,shallShowMoveToActionFor:K,moveSelectedEmailTo:Q}=re(),k=C(!1),h=C(""),r=C([]),W=l=>{const a=r.value.indexOf(l);a===-1?r.value.push(l):r.value.splice(a,1)},S=D(()=>o.emails.length&&o.emails.length===r.value.length),R=D(()=>Boolean(r.value.length)&&o.emails.length!==r.value.length),X=()=>{r.value=S.value?[]:o.emails.map(l=>l.id)},n=C(null),Y=D(()=>{const l={hasNextEmail:!1,hasPreviousEmail:!1};if(n.value){const a=o.emails.findIndex(e=>e.id===n.value.id);l.hasNextEmail=!!o.emails[a+1],l.hasPreviousEmail=!!o.emails[a-1]}return l}),x=async()=>{r.value=[],await o.fetchEmails({q:h.value,filter:v.params.filter,label:v.params.label})},u=async(l,a=r.value)=>{!a.length||(l==="trash"?o.updateEmails(a,{isDeleted:!0}):l==="spam"?o.updateEmails(a,{folder:"spam"}):l==="unread"?o.updateEmails(a,{isRead:!1}):l==="read"?o.updateEmails(a,{isRead:!0}):l==="star"?o.updateEmails(a,{isStarred:!0}):l==="unstar"&&o.updateEmails(a,{isStarred:!1}),await x())};M([h,()=>v.params.filter,()=>v.params.label],x,{immediate:!0}),M([()=>v.params.filter,()=>v.params.label],()=>{n.value=null});const Z=l=>{Q(l,r.value),x()},ee=l=>{o.updateEmailLabels(r.value,l),x()},te=l=>{if(!n.value)return;const a=o.emails.findIndex(d=>d.id===n.value.id),e=l==="previous"?a-1:a+1;n.value=o.emails[e]},ae=l=>{n.value=l,u("read",[l.id])},le=async()=>{await x(),n.value&&(n.value=o.emails.find(l=>l.id===n.value.id))};return(l,a)=>(p(),y(pe,{class:"email-app-layout"},{default:i(()=>[t(xe,{modelValue:s(g),"onUpdate:modelValue":a[1]||(a[1]=e=>A(g)?g.value=e:null),absolute:"",touchless:"",location:"start",temporary:l.$vuetify.display.mdAndDown},{default:i(()=>[t(de,{onToggleComposeDialogVisibility:a[0]||(a[0]=e=>k.value=!s(k))})]),_:1},8,["modelValue","temporary"]),t(me,{email:s(n),"email-meta":s(Y),onRefresh:le,onNavigated:te,onClose:a[2]||(a[2]=e=>n.value=null),onRemove:a[3]||(a[3]=e=>u("trash",s(n)?[s(n).id]:[])),onUnread:a[4]||(a[4]=e=>u("unread",s(n)?[s(n).id]:[])),onStar:a[5]||(a[5]=e=>u("star",s(n)?[s(n).id]:[])),onUnstar:a[6]||(a[6]=e=>u("unstar",s(n)?[s(n).id]:[]))},null,8,["email","email-meta"]),t(fe,null,{default:i(()=>[t(he,{flat:"",class:"h-100 d-flex flex-column"},{default:i(()=>[f("div",ge,[t(c,{variant:"text",color:"default",icon:"",size:"small",class:"d-lg-none ms-3",onClick:a[7]||(a[7]=e=>g.value=!0)},{default:i(()=>[t(m,{size:"24",icon:"tabler-menu-2"})]),_:1}),t(Ve,{modelValue:s(h),"onUpdate:modelValue":a[8]||(a[8]=e=>A(h)?h.value=e:null),density:"default",class:"email-search px-1 flex-grow-1","prepend-inner-icon":"tabler-search",placeholder:"Search email"},null,8,["modelValue"])]),t(F),f("div",ke,[t(P,{"model-value":s(S),indeterminate:s(R),"onUpdate:modelValue":X},null,8,["model-value","indeterminate"]),f("div",{class:"w-100 d-flex items-center action-bar-actions",style:se({visibility:s(R)||s(S)?void 0:"hidden"})},[z(t(c,{variant:"text",color:"default",icon:"",size:"small",onClick:a[9]||(a[9]=e=>u("trash"))},{default:i(()=>[t(m,{size:"22",icon:"tabler-trash"})]),_:1},512),[[E,l.$route.params.filter!=="trashed"]]),t(c,{variant:"text",color:"default",icon:"",size:"small",onClick:a[10]||(a[10]=e=>u("unread"))},{default:i(()=>[t(m,{size:"22",icon:"tabler-mail"})]),_:1}),t(c,{variant:"text",color:"default",icon:"",size:"small"},{default:i(()=>[t(m,{size:"22",icon:"tabler-folder"}),t(T,{activator:"parent"},{default:i(()=>[t(I,{density:"compact"},{default:i(()=>[(p(!0),V(w,null,$(s(J),e=>(p(),y(O,{key:e.title,class:B([s(K)(e.action)?"d-flex":"d-none","items-center"]),href:"#",onClick:d=>Z(e.action)},{prepend:i(()=>[t(m,{icon:e.icon,class:"me-2",size:"20"},null,8,["icon"])]),default:i(()=>[t(j,{class:"text-capitalize"},{default:i(()=>[N(_(e.action),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1}),t(c,{variant:"text",color:"default",icon:"",size:"small"},{default:i(()=>[t(m,{size:"22",icon:"tabler-tag"}),t(T,{activator:"parent"},{default:i(()=>[t(I,{density:"compact"},{default:i(()=>[(p(!0),V(w,null,$(s(H),e=>(p(),y(O,{key:e.title,href:"#",onClick:d=>ee(e.title)},{prepend:i(()=>[t(G,{inline:"",color:s(L)(e.title),dot:""},null,8,["color"])]),default:i(()=>[t(j,{class:"ms-2 text-capitalize"},{default:i(()=>[N(_(e.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1})],4),t(q),t(c,{variant:"text",color:"default",icon:"",size:"small",onClick:x},{default:i(()=>[t(m,{size:"22",icon:"tabler-reload"})]),_:1}),t(c,{variant:"text",color:"default",icon:"",size:"small"},{default:i(()=>[t(m,{size:"22",icon:"tabler-dots-vertical"})]),_:1})]),t(F),t(s(ie),{tag:"ul",options:{wheelPropagation:!1},class:"email-list"},{default:i(()=>[(p(!0),V(w,null,$(s(o).emails,e=>z((p(),V("li",{key:e.id,class:B(["email-item d-flex align-center py-2 px-5 cursor-pointer",[{"email-read":e.isRead}]]),onClick:d=>ae(e)},[t(P,{"model-value":s(r).includes(e.id),class:"flex-shrink-0","onUpdate:modelValue":d=>W(e.id),onClick:a[11]||(a[11]=b(()=>{},["stop"]))},null,8,["model-value","onUpdate:modelValue"]),t(c,{variant:"text",icon:"",size:"small",color:e.isStarred?"warning":"default",onClick:b(d=>u(e.isStarred?"unstar":"star",[e.id]),["stop"])},{default:i(()=>[t(m,{size:"22",icon:"tabler-star"})]),_:2},1032,["color","onClick"]),t(_e,{class:"mx-2",size:"32"},{default:i(()=>[t(be,{src:e.from.avatar,alt:e.from.name},null,8,["src","alt"])]),_:2},1024),f("h6",ye,_(e.from.name),1),f("span",ze,_(e.subject),1),t(q),f("div",Ee,[(p(!0),V(w,null,$(e.labels,d=>(p(),y(G,{key:d,inline:"",color:s(L)(d),dot:""},null,8,["color"]))),128)),f("small",$e,_(s(ve)(e.time)),1)]),f("div",we,[t(c,{variant:"text",color:"default",icon:"",size:"small",onClick:b(d=>u("trash",[e.id]),["stop"])},{default:i(()=>[t(m,{size:"22",icon:"tabler-trash"})]),_:2},1032,["onClick"]),t(c,{variant:"text",color:"default",icon:"",size:"small",onClick:b(d=>u(e.isRead?"unread":"read",[e.id]),["stop"])},{default:i(()=>[t(m,{size:"22",icon:e.isRead?"tabler-mail":"tabler-mail-opened"},null,8,["icon"])]),_:2},1032,["onClick"]),t(c,{variant:"text",color:"default",icon:"",size:"small",onClick:b(d=>u("spam",[e.id]),["stop"])},{default:i(()=>[t(m,{size:"22",icon:"tabler-alert-octagon"})]),_:2},1032,["onClick"])])],10,Ce)),[[E,s(o).emails.length]])),128)),z(f("li",Se,Le,512),[[E,!s(o).emails.length]])]),_:1})]),_:1}),z(t(ue,{onClose:a[12]||(a[12]=e=>k.value=!1)},null,512),[[E,s(k)]])]),_:1})]),_:1}))}};typeof U=="function"&&U(Re);export{Re as default};

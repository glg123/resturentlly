import{a as K,V as D,c as M}from"./VCard.2abcdcfe.js";import{V as E}from"./VSpacer.8e0d4c8c.js";import{s as L,o as m,f as z,w as t,g as e,i as l,y as r,e as x,z as T,C,r as Q,l as b,F as y,B as k,m as F,j as h,bg as W,U as I,be as X,G as A,H as B,bf as N,E as Y,P as Z,p as P}from"./main.e5722c22.js";import{V as j}from"./VTextField.c7d5535f.js";import{V as $}from"./VDivider.19cd6d54.js";import{V as ee}from"./VTextarea.fa7fc197.js";import{V as p}from"./VBtn.4327307d.js";import{V as O}from"./VBadge.4246b3b2.js";import{b as te}from"./formatters.ab6dea15.js";import{V as ae}from"./VChip.f64a01b2.js";import{V as R}from"./VMenu.1340a45a.js";import{V as U,a as H,b as q}from"./VList.345ceaa4.js";import{V as le}from"./VAvatar.1bc59f66.js";import{V as G}from"./VImg.a33717ea.js";import{V as se}from"./VNavigationDrawer.c44d2637.js";const ie={class:"d-flex align-center"},oe=l("span",{class:"font-weight-semibold"},"Compose Mail",-1),re={class:"pe-5"},ne=l("div",{class:"text-sm text-disabled"}," To: ",-1),me=l("span",{class:"cursor-pointer"},"Cc | Bcc",-1),ce=l("div",{class:"text-sm text-disabled"}," Subject: ",-1),de={class:"d-flex align-center px-5 py-4"},Qe={__name:"ComposeDialog",emits:["close"],setup(o,{emit:d}){const s=L(""),v=L(""),_=L(""),g=()=>{s.value=v.value=_.value=""};return(V,a)=>(m(),z(D,{class:"email-compose-dialog",elevation:"24"},{default:t(()=>[e(K,{class:"py-3 px-5"},{default:t(()=>[l("div",ie,[oe,e(E),e(r,{size:"20",icon:"tabler-minus",class:"me-4",onClick:a[0]||(a[0]=n=>V.$emit("close"))}),e(r,{size:"20",icon:"tabler-x",onClick:a[1]||(a[1]=n=>{V.$emit("close"),g()})})])]),_:1}),l("div",re,[e(j,{modelValue:x(s),"onUpdate:modelValue":a[2]||(a[2]=n=>T(s)?s.value=n:null),density:"compact"},{"prepend-inner":t(()=>[ne]),append:t(()=>[me]),_:1},8,["modelValue"])]),e($),e(j,{modelValue:x(v),"onUpdate:modelValue":a[3]||(a[3]=n=>T(v)?v.value=n:null),density:"compact"},{"prepend-inner":t(()=>[ce]),_:1},8,["modelValue"]),e($),e(ee,{modelValue:x(_),"onUpdate:modelValue":a[4]||(a[4]=n=>T(_)?_.value=n:null),placeholder:"Message"},null,8,["modelValue"]),e($),l("div",de,[e(p,null,{default:t(()=>[C("Send")]),_:1}),e(r,{icon:"tabler-link",class:"ms-4 cursor-pointer"}),e(E),e(r,{icon:"tabler-dots-vertical",size:"20",class:"cursor-pointer"}),e(r,{icon:"tabler-trash",size:"20",class:"ms-4 cursor-pointer",onClick:a[5]||(a[5]=n=>{V.$emit("close"),g()})})])]),_:1}))}};const pe={class:"pa-5"},ue={class:"email-filters-labels"},fe=["href","onClick"],ve=l("li",{class:"text-xs d-block text-uppercase text-disabled mt-6"}," LABELS ",-1),_e=["href","onClick"],We={__name:"EmailLeftSidebarContent",emits:["toggleComposeDialogVisibility"],setup(o,{emit:d}){const s=[{title:"Inbox",prependIcon:"tabler-mail",to:{name:"apps-email"}},{title:"Sent",prependIcon:"tabler-send",to:{name:"apps-email-filter",params:{filter:"sent"}}},{title:"Draft",prependIcon:"tabler-pencil",to:{name:"apps-email-filter",params:{filter:"draft"}}},{title:"Starred",prependIcon:"tabler-star",to:{name:"apps-email-filter",params:{filter:"starred"}}},{title:"Spam",prependIcon:"tabler-help",to:{name:"apps-email-filter",params:{filter:"spam"}}},{title:"Trash",prependIcon:"tabler-trash",to:{name:"apps-email-filter",params:{filter:"trashed"}}}],v=[{title:"Personal",color:"success",to:{name:"apps-email-label",params:{label:"personal"}}},{title:"Company",color:"primary",to:{name:"apps-email-label",params:{label:"company"}}},{title:"Important",color:"warning",to:{name:"apps-email-label",params:{label:"important"}}},{title:"Private",color:"error",to:{name:"apps-email-label",params:{label:"private"}}}];return(_,g)=>{const V=Q("RouterLink");return m(),b(y,null,[l("div",pe,[e(p,{block:"",onClick:g[0]||(g[0]=a=>_.$emit("toggleComposeDialogVisibility"))},{default:t(()=>[C(" Compose ")]),_:1})]),l("ul",ue,[(m(),b(y,null,k(s,a=>e(V,{key:a.title,class:"d-flex items-center cursor-pointer",to:a.to,custom:""},{default:t(({isActive:n,href:u,navigate:w})=>[l("li",F(_.$attrs,{href:u,class:[n&&"email-filter-active text-primary","cursor-pointer"],onClick:w}),[e(r,{icon:a.prependIcon,class:"me-3",size:"20"},null,8,["icon"]),l("span",null,h(a.title),1)],16,fe)]),_:2},1032,["to"])),64)),ve,(m(),b(y,null,k(v,a=>e(V,{key:a.title,class:"d-flex items-center",to:a.to,custom:""},{default:t(({isActive:n,href:u,navigate:w})=>[l("li",F(_.$attrs,{href:u,class:[n&&"email-label-active text-primary","cursor-pointer"],onClick:w}),[e(O,{inline:"",dot:"",color:a.color,class:"me-4"},null,8,["color"]),l("span",null,h(a.title),1)],16,_e)]),_:2},1032,["to"])),64))])],64)}}},J=W("email",{state:()=>({emails:[],emailsMeta:{draft:0,inbox:0,spam:0}}),actions:{async fetchEmails(o){const d=await I.get("/apps/email/emails",{params:o}),{emails:s,emailsMeta:v}=d.data;this.emails=s,this.emailsMeta=v},async updateEmails(o,d){return I.post("/apps/email/update-emails/",{ids:o,data:d})},async updateEmailLabels(o,d){return I.post("/apps/email/update-emails-label",{ids:o,label:d})}}}),he=()=>{const o=X(),d=J();return{labels:[{title:"personal",color:"success"},{title:"company",color:"primary"},{title:"important",color:"warning"},{title:"private",color:"error"}],resolveLabelColor:a=>a==="personal"?"success":a==="company"?"primary":a==="important"?"warning":a==="private"?"error":"secondary",shallShowMoveToActionFor:a=>a==="trash"?o.params.filter!=="trashed":a==="inbox"?!(o.params.filter===void 0||o.params.filter==="sent"||o.params.filter==="draft"):a==="spam"?!(o.params.filter==="spam"||o.params.filter==="sent"||o.params.filter==="draft"):!1,emailMoveToFolderActions:[{action:"inbox",icon:"tabler-mail"},{action:"spam",icon:"tabler-alert-octagon"},{action:"trash",icon:"tabler-trash"}],moveSelectedEmailTo:(a,n)=>{const u={};a==="inbox"?(o.params.filter==="trashed"&&(u.isDeleted=!1),u.folder="inbox"):a==="spam"?(o.params.filter==="trashed"&&(u.isDeleted=!1),u.folder="spam"):a==="trash"&&(u.isDeleted=!0),d.updateEmails(n,u)}}};const xe={class:"email-view-header d-flex align-center px-5 py-3"},be={class:"d-flex align-center flex-wrap flex-grow-1 overflow-hidden gap-2"},ge={class:"text-body-1 font-weight-medium text-high-emphasis text-truncate"},Ve={class:"d-flex flex-wrap gap-1"},ye={class:"d-flex align-center"},$e={class:"email-view-action-bar d-flex align-center text-medium-emphasis px-5"},Ce={class:"d-flex align-start"},ke={class:"d-flex flex-wrap flex-grow-1 overflow-hidden"},we={class:"text-truncate"},ze={class:"d-block text-high-emphasis font-weight-medium text-truncate"},Se={class:"text-sm text-disabled"},Me={class:"d-flex align-center"},Ee={class:"me-2"},Le=["innerHTML"],Te=l("span",null,"Attachments",-1),Ie=l("div",{class:"text-base"},[C(" Click here to "),l("span",{class:"text-primary cursor-pointer"}," Reply "),C(" or "),l("span",{class:"text-primary cursor-pointer"}," Forward ")],-1),Xe={__name:"EmailView",props:{email:{type:null,required:!0},emailMeta:{type:Object,required:!0}},emits:["refresh","navigated","close","trash","unread","star","unstar"],setup(o,{emit:d}){const s=o,v=J(),{labels:_,resolveLabelColor:g,emailMoveToFolderActions:V,shallShowMoveToActionFor:a,moveSelectedEmailTo:n}=he(),u=c=>{n(c,[s.email.id]),d("refresh"),d("close")},w=c=>{v.updateEmailLabels([s.email.id],c),d("refresh")};return(c,f)=>(m(),z(se,{temporary:"","model-value":!!s.email,location:"right",scrim:!1,floating:"",class:"email-view"},{default:t(()=>[s.email?(m(),b(y,{key:0},[l("div",xe,[e(p,{icon:"",variant:"text",color:"default",size:"small",class:"me-4 flip-in-rtl",onClick:f[0]||(f[0]=i=>c.$emit("close"))},{default:t(()=>[e(r,{size:"28",icon:"tabler-chevron-left"})]),_:1}),l("div",be,[l("h2",ge,h(s.email.subject),1),l("div",Ve,[(m(!0),b(y,null,k(s.email.labels,i=>(m(),z(ae,{key:i,color:x(g)(i),density:"comfortable",class:"px-2 text-capitalize me-2 flex-shrink-0"},{default:t(()=>[C(h(i),1)]),_:2},1032,["color"]))),128))])]),l("div",ye,[e(p,{icon:"",variant:"text",color:"default",size:"small",disabled:!s.emailMeta.hasPreviousEmail,class:"text-medium-emphasis flip-in-rtl",onClick:f[1]||(f[1]=i=>c.$emit("navigated","previous"))},{default:t(()=>[e(r,{size:"22",icon:"tabler-chevron-left"})]),_:1},8,["disabled"]),e(p,{icon:"",variant:"text",color:"default",size:"small",class:"text-medium-emphasis flip-in-rtl",disabled:!s.emailMeta.hasNextEmail,onClick:f[2]||(f[2]=i=>c.$emit("navigated","next"))},{default:t(()=>[e(r,{size:"22",icon:"tabler-chevron-right"})]),_:1},8,["disabled"])])]),e($),l("div",$e,[A(e(p,{icon:"",variant:"text",color:"default",size:"small",onClick:f[3]||(f[3]=i=>{c.$emit("trash"),c.$emit("close")})},{default:t(()=>[e(r,{size:"22",icon:"tabler-trash"})]),_:1},512),[[B,!s.email.isDeleted]]),e(p,{icon:"",variant:"text",color:"default",size:"small",onClick:f[4]||(f[4]=N(i=>{c.$emit("unread"),c.$emit("close")},["stop"]))},{default:t(()=>[e(r,{size:"22",icon:"tabler-mail"})]),_:1}),e(p,{variant:"text",color:"default",icon:"",size:"small"},{default:t(()=>[e(r,{size:"22",icon:"tabler-folder"}),e(R,{activator:"parent"},{default:t(()=>[e(U,{density:"compact"},{default:t(()=>[(m(!0),b(y,null,k(x(V),i=>(m(),z(H,{key:i.title,class:Y([x(a)(i.action)?"d-flex":"d-none","items-center"]),href:"#",onClick:S=>u(i.action)},{prepend:t(()=>[e(r,{icon:i.icon,class:"me-2",size:"20"},null,8,["icon"])]),default:t(()=>[e(q,{class:"text-capitalize"},{default:t(()=>[C(h(i.action),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(p,{variant:"text",color:"default",icon:"",size:"small"},{default:t(()=>[e(r,{size:"22",icon:"tabler-tag"}),e(R,{activator:"parent"},{default:t(()=>[e(U,{density:"compact"},{default:t(()=>[(m(!0),b(y,null,k(x(_),i=>(m(),z(H,{key:i.title,href:"#",onClick:N(S=>w(i.title),["stop"])},{prepend:t(()=>[e(O,{inline:"",color:x(g)(i.title),dot:""},null,8,["color"])]),default:t(()=>[e(q,{class:"ms-2 text-capitalize"},{default:t(()=>[C(h(i.title),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),e(E),e(p,{icon:"",variant:"text",size:"small",color:s.email.isStarred?"warning":"default",onClick:f[5]||(f[5]=i=>{var S;(S=s.email)!=null&&S.isStarred?c.$emit("unstar"):c.$emit("star"),c.$emit("refresh")})},{default:t(()=>[e(r,{size:"22",icon:"tabler-star"})]),_:1},8,["color"]),e(p,{variant:"text",color:"default",icon:"",size:"small"},{default:t(()=>[e(r,{size:"22",icon:"tabler-dots-vertical"})]),_:1})]),e($),e(x(Z),{tag:"div",class:"mail-content-container flex-grow-1",options:{wheelPropagation:!1}},{default:t(()=>[e(D,{class:"ma-5"},{default:t(()=>[e(M,{class:"mail-header"},{default:t(()=>[l("div",Ce,[e(le,{class:"me-3"},{default:t(()=>[e(G,{src:s.email.from.avatar,alt:s.email.from.name},null,8,["src","alt"])]),_:1}),l("div",ke,[l("div",we,[l("span",ze,h(s.email.from.name),1),l("span",Se,h(s.email.from.email),1)]),e(E),l("div",Me,[l("span",Ee,h(x(te)(s.email.time)),1),A(e(p,{variant:"text",color:"default",icon:"",size:"small"},{default:t(()=>[e(r,{size:"22",icon:"tabler-link"})]),_:1},512),[[B,s.email.attachments.length]])])]),e(p,{variant:"text",color:"default",icon:"",size:"small"},{default:t(()=>[e(r,{size:"22",icon:"tabler-dots-vertical"})]),_:1})])]),_:1}),e($),e(M,null,{default:t(()=>[l("div",{class:"text-base",innerHTML:s.email.message},null,8,Le)]),_:1}),s.email.attachments.length?(m(),b(y,{key:0},[e($),e(M,{class:"d-flex flex-column gap-y-4"},{default:t(()=>[Te,(m(!0),b(y,null,k(s.email.attachments,i=>(m(),b("div",{key:i.fileName,class:"d-flex align-center"},[e(G,{src:i.thumbnail,alt:i.fileName,"aspect-ratio":"1","max-height":"24","max-width":"24",class:"me-2"},null,8,["src","alt"]),l("span",null,h(i.fileName),1)]))),128))]),_:1})],64)):P("",!0)]),_:1}),e(D,{class:"mx-5 mb-5"},{default:t(()=>[e(M,{class:"font-weight-medium text-high-emphasis"},{default:t(()=>[Ie]),_:1})]),_:1})]),_:1})],64)):P("",!0)]),_:1},8,["model-value"]))}};export{We as _,he as a,Xe as b,Qe as c,J as u};

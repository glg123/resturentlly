import{aP as ae,s as r,c as le,U as u,Q as U,x as se,ai as oe,o as m,l as h,g as t,w as o,F as O,B as E,e as d,z as v,i as l,C as x,j as n,f as Q,p as ne,G as ie,H as re,W as de,r as ce,y as q}from"./main.e5722c22.js";import{_ as ue}from"./AddNewUserDrawer.905088ab.js";import{a as me}from"./formatters.ab6dea15.js";import{u as pe}from"./useAdminListStore.251ab28b.js";import{b as G}from"./route-block.2f1a6263.js";import{a as w,V as H}from"./VRow.f8de802a.js";import{V as M,c as y}from"./VCard.2abcdcfe.js";import{V as z}from"./VSelect.23e06609.js";import{V as D}from"./VDivider.19cd6d54.js";import{V as fe}from"./VSpacer.8e0d4c8c.js";import{V as ve}from"./VTextField.c7d5535f.js";import{V as $}from"./VBtn.4327307d.js";import{V as _e}from"./VTable.045acce0.js";import{V as he}from"./VPagination.f1c00294.js";import{V as C}from"./VAvatar.1bc59f66.js";import{V as ge}from"./VImg.a33717ea.js";import{V as Ve}from"./VChip.f64a01b2.js";import"./validators.330a354f.js";import"./index.b522f886.js";import"./VForm.be976fbe.js";import"./VInput.1a6e2ae8.js";import"./router.f3c33ba4.js";import"./index.19c19380.js";import"./forwardRefs.c003b6b8.js";import"./VNavigationDrawer.c44d2637.js";import"./ssrBoot.15e4635b.js";import"./position.fb77405d.js";import"./VList.345ceaa4.js";import"./dialog-transition.738c368f.js";import"./easing.36b781ab.js";import"./VMenu.1340a45a.js";import"./scopeId.23faa331.js";import"./VOverlay.ed5a8d46.js";import"./lazy.d1bb34b2.js";import"./VCheckboxBtn.d3981e2f.js";import"./VSelectionControl.336d6e11.js";/* empty css                   */import"./VField.01372b27.js";import"./VCounter.bc3c6bfa.js";const be={class:"d-flex align-center gap-2 my-1"},xe={class:"text-h6"},we={class:"me-3",style:{width:"80px"}},ye={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},$e={style:{width:"10rem"}},ke={scope:"col"},Se={scope:"col"},Ue={scope:"col"},ze={scope:"col"},De={class:"d-flex align-center"},Ce={key:1},Pe={class:"d-flex flex-column"},je={class:"text-base"},Ae={class:"text-sm text-disabled"},Le={class:"text-capitalize text-base"},Ne={class:"text-center",style:{width:"5rem"}},Re={colspan:"7",class:"text-center"},Te={class:"text-sm text-disabled"},Be={__name:"index",setup(Ie){const{t:i}=ae(),P=pe(),g=r(""),V=r(),W=r(),b=r(),p=r(1),c=r(1),f=r(1),j=r(0),_=r([]),A=r(1),L=r(1),N=r(1),R=r(1),J=de(),{isAppRtl:K}=le();let T=localStorage.getItem("accessToken");u.defaults.headers.common["Content-Type"]="application/json",u.defaults.headers.common.Accept="application/json",K.value===!0?u.defaults.headers.common.Language="ar":u.defaults.headers.common.Language="en",u.defaults.headers.common.type="Admin",u.defaults.headers.common.role="Admin",u.defaults.headers.common.auth="Bearer "+T;const B=()=>{P.fetchUsers({q:g.value,status:b.value,plan:W.value,admin_role_id:V.value,perPage:p.value,page:c.value}).then(e=>{_.value=e.data.admins.data,L.value=e.data.admins.data.length,f.value=e.data.admins.last_page,j.value=e.data.admins.total,A.value=e.data.admins_active,N.value=e.data.admins_not_active,R.value=e.data.admins_block}).catch(e=>{console.error(e)})};U(B),U(()=>{c.value>f.value&&(c.value=f.value)});const k=r([]),X=[{title:i("block"),value:"block"},{title:i("active"),value:"active"},{title:i("not_active"),value:"not_active"}],Y=e=>e==="pending"?"warning":e==="active"?"success":e==="inactive"?"secondary":"primary",S=r(!1);U(()=>{c.value>f.value&&(c.value=f.value)});const Z=se(()=>{const e=_.value.length?(c.value-1)*p.value+1:0,s=_.value.length+(c.value-1)*p.value;return` ${i("Showing")} ${e} ${i("to")} ${s} ${i("of")} ${j.value} ${i("entries")}`}),ee=e=>{P.addUser(e),B()},te=[{icon:"tabler-user",color:"primary",title:i("total_user"),stats:L,percentage:29,subtitle:i("total_user")},{icon:"tabler-user-plus",color:"error",title:i("not_active_user"),stats:N,percentage:18,subtitle:i("not_active_user")},{icon:"tabler-user-check",color:"success",title:i("active_user"),stats:A,percentage:-14,subtitle:i("active_user")},{icon:"tabler-user-exclamation",color:"warning",title:i("block_user"),stats:R,percentage:42,subtitle:i("block_user")}],I={action:"read",subject:"admins_add"};return oe(J,()=>{u.get("/roles/list",{token:T}).then(e=>{for(var s=0;s<e.data.length;s++)console.log(e.data[s].id,"res"),console.log(e.data[s].role_name,"res"),k.value[s]={title:e.data[s].role_name,value:e.data[s].id};console.log(k.value,"res")})},{immediate:!0}),(e,s)=>{const F=ce("RouterLink");return m(),h("section",null,[t(H,null,{default:o(()=>[(m(),h(O,null,E(te,a=>t(w,{key:a.title,cols:"12",sm:"6",lg:"3"},{default:o(()=>[t(M,null,{default:o(()=>[t(y,{class:"d-flex justify-space-between"},{default:o(()=>[l("div",null,[l("span",null,n(a.title),1),l("div",be,[l("h6",xe,n(a.stats),1)]),l("span",null,n(a.subtitle),1)]),t(C,{rounded:"",variant:"tonal",color:a.color,icon:a.icon},null,8,["color","icon"])]),_:2},1024)]),_:2},1024)]),_:2},1024)),64)),t(w,{cols:"12"},{default:o(()=>[t(M,{title:e.$t("Search Filter")},{default:o(()=>[t(y,null,{default:o(()=>[t(H,null,{default:o(()=>[t(w,{cols:"12",sm:"4"},{default:o(()=>[t(z,{modelValue:d(V),"onUpdate:modelValue":s[0]||(s[0]=a=>v(V)?V.value=a:null),label:e.$t("Select Role"),items:d(k),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","label","items"])]),_:1}),t(w,{cols:"12",sm:"4"},{default:o(()=>[t(z,{modelValue:d(b),"onUpdate:modelValue":s[1]||(s[1]=a=>v(b)?b.value=a:null),label:e.$t("Select Status"),items:X,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),t(D),t(y,{class:"d-flex flex-wrap py-4 gap-4"},{default:o(()=>[l("div",we,[t(z,{modelValue:d(p),"onUpdate:modelValue":s[2]||(s[2]=a=>v(p)?p.value=a:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),t(fe),l("div",ye,[l("div",$e,[t(ve,{modelValue:d(g),"onUpdate:modelValue":s[3]||(s[3]=a=>v(g)?g.value=a:null),placeholder:"Search",density:"compact"},null,8,["modelValue"])]),t($,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share"},{default:o(()=>[x(n(e.$t("export")),1)]),_:1}),e.$can(I.action,I.subject)?(m(),Q($,{key:0},{default:o(()=>[t(F,{to:{name:"admin-apps-admins-add-add_new"},class:"font-weight-medium user-list-name"},{default:o(()=>[x(n(e.$t("AddNew")),1)]),_:1})]),_:1})):ne("",!0)])]),_:1}),t(D),t(_e,{class:"text-no-wrap"},{default:o(()=>[l("thead",null,[l("tr",null,[l("th",ke,n(e.$t("email")),1),l("th",Se,n(e.$t("role")),1),l("th",Ue,n(e.$t("status")),1),l("th",ze,n(e.$t("action")),1)])]),l("tbody",null,[(m(!0),h(O,null,E(d(_),a=>(m(),h("tr",{key:a.id,style:{height:"3.75rem"}},[l("td",null,[l("div",De,[t(C,{variant:"tonal",class:"me-3",size:"38"},{default:o(()=>[a.avatar?(m(),Q(ge,{key:0,src:a.avatar},null,8,["src"])):(m(),h("span",Ce,n(d(me)(a.name)),1))]),_:2},1024),l("div",Pe,[l("h6",je,[t(F,{to:{name:"admin-apps-admins-view-id",params:{id:a.id}},class:"font-weight-medium user-list-name"},{default:o(()=>[x(n(a.name),1)]),_:2},1032,["to"])]),l("span",Ae,"@"+n(a.email),1)])])]),l("td",null,[t(C,{color:"secondary",icon:"tabler-device-laptop",variant:"tonal",size:"30",class:"me-4"}),l("span",Le,n(e.$t(a.role)),1)]),l("td",null,[t(Ve,{label:"",color:Y(a.status),size:"small",class:"text-capitalize"},{default:o(()=>[x(n(e.$t(a.status)),1)]),_:2},1032,["color"])]),l("td",Ne,[t($,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"admin-apps-admins-view-id",params:{id:a.id}}},{default:o(()=>[t(q,{size:"22",icon:"tabler-edit"})]),_:2},1032,["to"]),t($,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"admin-apps-admins-view-id",params:{id:a.id}}},{default:o(()=>[t(q,{size:"22",icon:"tabler-trash"})]),_:2},1032,["to"])])]))),128))]),ie(l("tfoot",null,[l("tr",null,[l("td",Re,n(e.$t("No data available")),1)])],512),[[re,!d(_).length]])]),_:1}),t(D),t(y,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:o(()=>[l("span",Te,n(d(Z)),1),t(he,{modelValue:d(c),"onUpdate:modelValue":s[4]||(s[4]=a=>v(c)?c.value=a:null),size:"small","total-visible":5,length:d(f)},null,8,["modelValue","length"])]),_:1})]),_:1},8,["title"])]),_:1})]),_:1}),t(ue,{isDrawerOpen:d(S),"onUpdate:isDrawerOpen":s[5]||(s[5]=a=>v(S)?S.value=a:null),onUserData:ee},null,8,["isDrawerOpen"])])}}};typeof G=="function"&&G(Be);export{Be as default};

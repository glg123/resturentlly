import{bg as F,U as A,e as t,o as i,l as _,i as e,g as o,w as m,y as f,E as x,f as b,j as v,P as N,F as g,p as C,x as B,cY as L,z as R,B as $,G as T,H as D,C as O}from"./main.e5722c22.js";import{a as M,f as E,b as q}from"./formatters.ab6dea15.js";import{V as z}from"./VBtn.4327307d.js";import{V}from"./VAvatar.1bc59f66.js";import{V as w}from"./VImg.a33717ea.js";import{V as k}from"./VBadge.4246b3b2.js";import{V as J}from"./VTextField.c7d5535f.js";import{V as j}from"./VDivider.19cd6d54.js";import{V as H}from"./VTextarea.fa7fc197.js";import{V as Y,a as K}from"./VRadioGroup.b0ad932a.js";const I=()=>({resolveAvatarBadgeVariant:c=>c==="online"?"success":c==="busy"?"error":c==="away"?"warning":"secondary"}),U=F("chat",{state:()=>({contacts:[],chatsContacts:[],profileUser:void 0,activeChat:null}),actions:{async fetchChatsAndContacts(p){const{data:c}=await A.get("/apps/chat/chats-and-contacts",{params:{q:p}}),{chatsContacts:a,contacts:d,profileUser:u}=c;this.chatsContacts=a,this.contacts=d,this.profileUser=u},async getChat(p){const{data:c}=await A.get(`/apps/chat/chats/${p}`);this.activeChat=c},async sendMsg(p){var l,s,r,h,y;const c=(l=this.profileUser)==null?void 0:l.id,{data:a}=await A.post(`/apps/chat/chats/${(s=this.activeChat)==null?void 0:s.contact.id}`,{message:p,senderId:c}),{msg:d,chat:u}=a;if(u!==void 0){const S=this.activeChat;this.chatsContacts.push({...S.contact,chat:{id:u.id,lastMessage:[],unseenMsgs:0,messages:[d]}}),this.activeChat&&(this.activeChat.chat={id:u.id,messages:[d],unseenMsgs:0,userId:(r=this.activeChat)==null?void 0:r.contact.id})}else(y=(h=this.activeChat)==null?void 0:h.chat)==null||y.messages.push(d);const n=this.chatsContacts.find(S=>this.activeChat?S.id===this.activeChat.contact.id:!1);n.chat.lastMessage=d}}}),Q={class:"text-center px-6"},W={key:1,class:"text-3xl"},X={class:"mb-1 font-weight-medium text-high-emphasis text-base"},Z={class:"text-capitalize text-sm text-medium-emphasis"},G={class:"my-8"},ee=e("span",{for:"textarea-user-about",class:"text-sm text-disabled"},"ABOUT",-1),te={class:"mt-2"},se={class:"mb-8"},ae=e("span",{class:"d-block text-sm text-disabled mb-3"},"PERSONAL INFORMATION",-1),oe={class:"d-flex align-center"},ce=e("span",null,"lucifer@email.com",-1),ne={class:"d-flex align-center my-3"},le=e("span",null,"+1(123) 456 - 7890",-1),ie={class:"d-flex align-center"},re=e("span",null,"Mon - Fri 10AM - 8PM",-1),de=e("span",{class:"d-block text-sm text-disabled mb-3"},"OPTIONS",-1),he={class:"d-flex align-center"},ue=e("span",null,"Add Tag",-1),me={class:"d-flex align-center my-3"},fe=e("span",null,"Important Contact",-1),_e={class:"d-flex align-center mb-3"},pe=e("span",null,"Shared Media",-1),ve={class:"d-flex align-center mb-3"},xe=e("span",null,"Delete Contact",-1),be={class:"d-flex align-center"},ge=e("span",null,"Block Contact",-1),rt={__name:"ChatActiveChatUserProfileSidebarContent",emits:["close"],setup(p,{emit:c}){const a=U(),{resolveAvatarBadgeVariant:d}=I();return(u,n)=>t(a).activeChat?(i(),_(g,{key:0},[e("div",{class:x(["pt-2 me-2",u.$vuetify.locale.isRtl?"text-left":"text-right"])},[o(z,{variant:"text",color:"default",icon:"",size:"small",onClick:n[0]||(n[0]=l=>u.$emit("close"))},{default:m(()=>[o(f,{size:"24",icon:"tabler-x",class:"text-medium-emphasis"})]),_:1})],2),e("div",Q,[o(k,{location:"bottom right","offset-x":"7","offset-y":"4",bordered:"",color:t(d)(t(a).activeChat.contact.status),class:"chat-user-profile-badge mb-5"},{default:m(()=>[o(V,{size:"80",class:x(["bg-surface",`text-${t(d)(t(a).activeChat.contact.status)}`]),variant:"tonal"},{default:m(()=>[t(a).activeChat.contact.avatar?(i(),b(w,{key:0,src:t(a).activeChat.contact.avatar},null,8,["src"])):(i(),_("span",W,v(t(M)(t(a).activeChat.contact.fullName)),1))]),_:1},8,["class"])]),_:1},8,["color"]),e("h2",X,v(t(a).activeChat.contact.fullName),1),e("p",Z,v(t(a).activeChat.contact.role),1)]),o(t(N),{class:"ps-chat-user-profile-sidebar-content text-medium-emphasis pb-5 px-5",options:{wheelPropagation:!1}},{default:m(()=>[e("div",G,[ee,e("p",te,v(t(a).activeChat.contact.about),1)]),e("div",se,[ae,e("div",oe,[o(f,{class:"me-2",icon:"tabler-mail",size:"22"}),ce]),e("div",ne,[o(f,{class:"me-2",icon:"tabler-phone",size:"22"}),le]),e("div",ie,[o(f,{class:"me-2",icon:"tabler-clock",size:"22"}),re])]),e("div",null,[de,e("div",he,[o(f,{class:"me-2",icon:"tabler-bookmark",size:"22"}),ue]),e("div",me,[o(f,{class:"me-2",icon:"tabler-star",size:"22"}),fe]),e("div",_e,[o(f,{class:"me-2",icon:"tabler-photo",size:"22"}),pe]),e("div",ve,[o(f,{class:"me-2",icon:"tabler-trash",size:"22"}),xe]),e("div",be,[o(f,{class:"me-2 ms-1",size:"18",icon:"tabler-ban"}),ge])])]),_:1})],64)):C("",!0)}};const Ce=["data-x"],ye={key:1},$e={class:"flex-grow-1 ms-4 overflow-hidden"},ke={class:"d-block text-sm text-truncate text-disabled"},Ve={key:0,class:"d-flex flex-column align-self-start"},we={class:"d-block text-disabled whitespace-no-wrap"},P={__name:"ChatContact",props:{isChatContact:{type:Boolean,required:!1,default:!1},user:{type:null,required:!0}},setup(p){const c=p,a=U(),{resolveAvatarBadgeVariant:d}=I(),u=B(()=>{var l,s;const n=((l=a.activeChat)==null?void 0:l.contact.id)===c.user.id;return(c.isChatContact||!((s=a.activeChat)!=null&&s.chat))&&n});return(n,l)=>(i(),_("li",{key:t(a).chatsContacts.length,class:x(["chat-contact cursor-pointer d-flex align-center",{"chat-contact-active":t(u)}]),"data-x":t(a).chatsContacts.length},[o(k,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",color:t(d)(c.user.status),bordered:"","model-value":c.isChatContact},{default:m(()=>[o(V,{size:"40",variant:"tonal",color:t(d)(c.user.status)},{default:m(()=>[c.user.avatar?(i(),b(w,{key:0,src:c.user.avatar,alt:"John Doe"},null,8,["src"])):(i(),_("span",ye,v(t(M)(p.user.fullName)),1))]),_:1},8,["color"])]),_:1},8,["color","model-value"]),e("div",$e,[e("span",null,v(c.user.fullName),1),e("span",ke,v(c.isChatContact&&"chat"in c.user?c.user.chat.lastMessage.message:c.user.about),1)]),c.isChatContact&&"chat"in c.user?(i(),_("div",Ve,[e("span",we,v(t(E)(c.user.chat.lastMessage.time)),1),c.user.chat.unseenMsgs?(i(),b(k,{key:0,color:"error",inline:"",content:c.user.chat.unseenMsgs,class:"ms-auto"},null,8,["content"])):C("",!0)])):C("",!0)],10,Ce))}};const Ue={key:0,class:"chat-list-header"},ze=e("li",null,[e("span",{class:"chat-contact-header d-block text-primary text-xl font-weight-medium"},"Chats")],-1),Ie={class:"no-chat-items-text text-disabled"},Se=e("li",null,[e("span",{class:"chat-contact-header d-block text-primary text-xl font-weight-medium"},"Contacts")],-1),Ae={class:"no-chat-items-text text-disabled"},dt={__name:"ChatLeftSidebarContent",props:{search:{type:String,required:!0},isDrawerOpen:{type:Boolean,required:!0}},emits:["openChatOfContact","showUserProfile","close"],setup(p,{emit:c}){const a=p,{resolveAvatarBadgeVariant:d}=I(),u=L(a,"search"),n=U();return(l,s)=>(i(),_(g,null,[t(n).profileUser?(i(),_("div",Ue,[o(k,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",color:t(d)(t(n).profileUser.status),bordered:""},{default:m(()=>[o(V,{size:"38",class:"cursor-pointer",onClick:s[0]||(s[0]=r=>l.$emit("showUserProfile"))},{default:m(()=>[o(w,{src:t(n).profileUser.avatar,alt:"John Doe"},null,8,["src"])]),_:1})]),_:1},8,["color"]),o(J,{modelValue:t(u),"onUpdate:modelValue":s[1]||(s[1]=r=>R(u)?u.value=r:null),density:"compact",placeholder:"Search...",class:"ms-4 me-1 chat-list-search"},{"prepend-inner":m(()=>[o(f,{size:"22",icon:"tabler-search"})]),_:1},8,["modelValue"]),l.$vuetify.display.smAndDown?(i(),b(z,{key:0,variant:"text",color:"default",icon:"",size:"small",onClick:s[2]||(s[2]=r=>l.$emit("close"))},{default:m(()=>[o(f,{size:"24",icon:"tabler-x",class:"text-medium-emphasis"})]),_:1})):C("",!0)])):C("",!0),o(j),o(t(N),{tag:"ul",class:"chat-contacts-list px-3",options:{wheelPropagation:!1}},{default:m(()=>[ze,(i(!0),_(g,null,$(t(n).chatsContacts,r=>(i(),b(P,{key:`chat-${r.id}`,user:r,"is-chat-contact":"",onClick:h=>l.$emit("openChatOfContact",r.id)},null,8,["user","onClick"]))),128)),T(e("span",Ie,"No chats found",512),[[D,!t(n).chatsContacts.length]]),Se,(i(!0),_(g,null,$(t(n).contacts,r=>(i(),b(P,{key:`chat-${r.id}`,user:r,onClick:h=>l.$emit("openChatOfContact",r.id)},null,8,["user","onClick"]))),128)),T(e("span",Ae,"No contacts found",512),[[D,!t(n).contacts.length]])]),_:1})],64))}};const Be={class:"chat-log pa-5"},Ne={class:"text-xs me-1 text-disabled"},ht={__name:"ChatLog",setup(p){const c=U(),a=B(()=>{var n,l;return{id:(n=c.activeChat)==null?void 0:n.contact.id,avatar:(l=c.activeChat)==null?void 0:l.contact.avatar}}),d=n=>n.isSeen?{icon:"tabler-checks",color:"success"}:n.isDelivered?{icon:"tabler-checks",color:void 0}:{icon:"tabler-check",color:void 0},u=B(()=>{let n=[];const l=[];if(c.activeChat.chat){n=c.activeChat.chat.messages;let s=n[0].senderId,r={senderId:s,messages:[]};n.forEach((h,y)=>{s===h.senderId?r.messages.push({message:h.message,time:h.time,feedback:h.feedback}):(s=h.senderId,l.push(r),r={senderId:h.senderId,messages:[{message:h.message,time:h.time,feedback:h.feedback}]}),y===n.length-1&&l.push(r)})}return l});return(n,l)=>(i(),_("div",Be,[(i(!0),_(g,null,$(t(u),(s,r)=>(i(),_("div",{key:s.senderId+String(r),class:x(["chat-group d-flex align-start",[{"flex-row-reverse":s.senderId!==t(a).id,"mb-8":t(u).length-1!==r}]])},[e("div",{class:x(["chat-avatar",s.senderId!==t(a).id?"ms-4":"me-4"])},[o(V,{size:"38"},{default:m(()=>{var h;return[o(w,{src:s.senderId===t(a).id?t(a).avatar:(h=t(c).profileUser)==null?void 0:h.avatar},null,8,["src"])]}),_:2},1024)],2),e("div",{class:x(["chat-body d-inline-flex flex-column",s.senderId!==t(a).id?"align-end":"align-start"])},[(i(!0),_(g,null,$(s.messages,(h,y)=>(i(),_("p",{key:h.time,class:x(["chat-content text-sm py-3 px-4 elevation-1",[s.senderId===t(a).id?"bg-surface chat-left":"bg-primary text-white chat-right",s.messages.length-1!==y?"mb-2":"mb-1"]])},v(h.message),3))),128)),e("div",{class:x({"text-right":s.senderId!==t(a).id})},[e("span",Ne,v(t(q)(s.messages[s.messages.length-1].time,{hour:"numeric",minute:"numeric"})),1),s.senderId!==t(a).id?(i(),b(f,{key:0,size:"16",color:d(s.messages[s.messages.length-1].feedback).color},{default:m(()=>[O(v(d(s.messages[s.messages.length-1].feedback).icon),1)]),_:2},1032,["color"])):C("",!0)],2)],2)],2))),128))]))}},Me={class:"pt-2 me-2 text-end"},Te={class:"text-center px-6"},De={key:1,class:"text-3xl"},Pe={class:"mb-1 text-high-emphasis font-weight-medium text-base"},Oe={class:"text-capitalize text-medium-emphasis text-sm"},Fe={class:"my-5 text-medium-emphasis"},Le=e("span",{for:"textarea-user-about",class:"text-sm text-disabled"},"ABOUT",-1),Re={class:"mb-5"},Ee=e("span",{class:"text-sm text-disabled"},"STATUS",-1),qe={class:"text-medium-emphasis"},Je=e("span",{class:"text-sm text-disabled"},"SETTINGS",-1),je={class:"d-flex align-center my-3"},He=e("span",null,"Two-step Verification",-1),Ye={class:"d-flex align-center mb-3"},Ke=e("span",null,"Notification",-1),Qe={class:"d-flex align-center mb-3"},We=e("span",null,"Invite Friends",-1),Xe={class:"d-flex align-center"},Ze=e("span",null,"Delete Account",-1),ut={__name:"ChatUserProfileSidebarContent",emits:["close"],setup(p,{emit:c}){const a=U(),{resolveAvatarBadgeVariant:d}=I(),u=[{title:"Online",value:"online",color:"success"},{title:"Away",value:"away",color:"warning"},{title:"Do not disturb",value:"busy",color:"error"},{title:"Offline",value:"offline",color:"secondary"}];return(n,l)=>t(a).profileUser?(i(),_(g,{key:0},[e("div",Me,[o(z,{variant:"text",color:"default",icon:"",size:"small",onClick:l[0]||(l[0]=s=>n.$emit("close"))},{default:m(()=>[o(f,{size:"24",class:"text-medium-emphasis",icon:"tabler-x"})]),_:1})]),e("div",Te,[o(k,{location:"bottom right","offset-x":"7","offset-y":"4",bordered:"",color:t(d)(t(a).profileUser.status),class:"chat-user-profile-badge mb-5"},{default:m(()=>[o(V,{size:"84",variant:"tonal",class:x(`text-${t(d)(t(a).profileUser.status)}`)},{default:m(()=>[t(a).profileUser.avatar?(i(),b(w,{key:0,src:t(a).profileUser.avatar},null,8,["src"])):(i(),_("span",De,v(t(M)(t(a).profileUser.fullName)),1))]),_:1},8,["class"])]),_:1},8,["color"]),e("h2",Pe,v(t(a).profileUser.fullName),1),e("p",Oe,v(t(a).profileUser.role),1)]),o(t(N),{class:"ps-chat-user-profile-sidebar-content pb-5 px-5",options:{wheelPropagation:!1}},{default:m(()=>[e("div",Fe,[Le,o(H,{id:"textarea-user-about",modelValue:t(a).profileUser.about,"onUpdate:modelValue":l[1]||(l[1]=s=>t(a).profileUser.about=s),"auto-grow":"",class:"mt-1",rows:"4"},null,8,["modelValue"])]),e("div",Re,[Ee,o(Y,{modelValue:t(a).profileUser.status,"onUpdate:modelValue":l[2]||(l[2]=s=>t(a).profileUser.status=s),class:"mt-1"},{default:m(()=>[(i(),_(g,null,$(u,s=>o(K,{key:s.title,label:s.title,value:s.value,color:s.color},null,8,["label","value","color"])),64))]),_:1},8,["modelValue"])]),e("div",qe,[Je,e("div",je,[o(f,{class:"me-2",icon:"tabler-circle-check",size:"22"}),He]),e("div",Ye,[o(f,{class:"me-2",icon:"tabler-bell",size:"22"}),Ke]),e("div",Qe,[o(f,{class:"me-2",icon:"tabler-user",size:"22"}),We]),e("div",Xe,[o(f,{class:"me-2",icon:"tabler-trash",size:"22"}),Ze])]),o(z,{color:"primary",class:"mt-11"},{default:m(()=>[O(" Logout ")]),_:1})]),_:1})],64)):C("",!0)}};export{ut as _,rt as a,dt as b,ht as c,I as d,U as u};

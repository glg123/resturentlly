import{s as n,aP as P,o as W,l as J,g as e,w as s,e as t,z as g,C as d,j as i,E as O,i as m,V as Z,t as T,bf as G,be as H,W as K,r as Q,U as X}from"./main.e5722c22.js";import{u as Y}from"./useAppAbility.977f44d8.js";import{u as L,m as ee,a as te}from"./useGenerateImageVariant.ae887621.js";import ae from"./NavBarI18n.0fbee115.js";import se from"./watch.c419ed99.js";import{a as oe,b as le,c as re,d as ie}from"./auth-v2-login-illustration-light.bdce81f1.js";import{V as ne}from"./vue-cookies.aacfa879.js";import{c as ue}from"./index.b522f886.js";import{b as R}from"./route-block.2f1a6263.js";import{V as A}from"./VSnackbar.dc45fad4.js";import{V as w}from"./VBtn.4327307d.js";import{a as u,V as x}from"./VRow.f8de802a.js";import{V as $}from"./VImg.a33717ea.js";import{V as me,c as C}from"./VCard.2abcdcfe.js";import{V as D}from"./VTextField.c7d5535f.js";import{V as de}from"./VCheckbox.7ee7e993.js";import{V as pe}from"./VForm.be976fbe.js";import"./I18n.f7b18a27.js";import"./VMenu.1340a45a.js";import"./forwardRefs.c003b6b8.js";import"./scopeId.23faa331.js";import"./VOverlay.ed5a8d46.js";import"./router.f3c33ba4.js";import"./lazy.d1bb34b2.js";import"./easing.36b781ab.js";import"./dialog-transition.738c368f.js";import"./VList.345ceaa4.js";import"./index.19c19380.js";import"./VAvatar.1bc59f66.js";import"./VDivider.19cd6d54.js";import"./position.fb77405d.js";/* empty css                                                              *//* empty css                   */import"./VField.01372b27.js";import"./VInput.1a6e2ae8.js";import"./VCounter.bc3c6bfa.js";import"./VCheckboxBtn.d3981e2f.js";import"./VSelectionControl.336d6e11.js";const ce=m("h1",{class:"text-primary-user"},"Resturentlly",-1),fe=[ce],ge={class:"position-relative auth-bg rounded-lg w-100 ma-8 me-0"},Ve={class:"d-flex align-center justify-center w-100 h-100"},be={class:"text-h5 font-weight-semibold mb-1"},_e={class:"mb-0"},ve={class:"d-flex align-center flex-wrap justify-space-between mt-2 mb-4"},he={__name:"login",setup(ye){const N=()=>{document.location.href="/"},B=o=>String(o).trim().length==0?r("This field is required"):!0,E=o=>{if(ue(o))return!0;const a=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return Array.isArray(o)?o.every(p=>a.test(String(p)))||r("The Email field must be a valid email"):a.test(String(o))||r("The Email field must be a valid email")},U=L(ie,re,le,oe,!0),q=L(te,ee),V=n(!1),S=H(),F=K(),M=Y(),{t:r}=P(),v=n({email:void 0,password:void 0}),I=n(),b=n(""),_=n(""),h=n(!1),c=n(!1),f=n(!1),y=n(!1),k=n(!1),j=()=>{X.post("client/login",{email:b.value,password:_.value}).then(o=>{const{accessToken:a,userData:p,userAbilities:l}=o.data;localStorage.setItem("userAbilities",JSON.stringify(l)),M.update(l),localStorage.setItem("userData",JSON.stringify(p)),localStorage.setItem("accessToken",a),ne.set("auth",a),c.value=!0,k.value=!1,y.value=!1,F.replace(S.query.to?String(S.query.to):"/dashboards/analytics")}).catch(o=>{console.log(o.response.data.message),v.value=o.response.data.message,f.value=!0,k.value=!1,y.value=!1})},z=()=>{var o;(o=I.value)==null||o.validate().then(({valid:a})=>{a&&(k.value=!0,y.value=!0,j())})};return(o,a)=>{const p=Q("RouterLink");return W(),J("div",null,[e(x,null,{default:s(()=>[e(A,{location:"top",modelValue:t(c),"onUpdate:modelValue":a[1]||(a[1]=l=>g(c)?c.value=l:null)},{actions:s(()=>[e(w,{color:"success",onClick:a[0]||(a[0]=l=>c.value=!1)},{default:s(()=>[d(i(o.$t("Close")),1)]),_:1})]),default:s(()=>[d(i(o.$t("Done"))+" ",1)]),_:1},8,["modelValue"]),e(A,{color:"error",location:"top",modelValue:t(f),"onUpdate:modelValue":a[3]||(a[3]=l=>g(f)?f.value=l:null)},{actions:s(()=>[e(w,{color:"success",onClick:a[2]||(a[2]=l=>f.value=!1)},{default:s(()=>[d(i(o.$t("Close")),1)]),_:1})]),default:s(()=>[d(i(t(v))+" ",1)]),_:1},8,["modelValue"]),e(u,{cols:"6",class:"mx-auto"},{default:s(()=>[e(ae)]),_:1}),e(u,{cols:"6",md:"6",class:O(["text-center",o.dir_h1])},{default:s(()=>[m("a",{onClick:N,href:"#"},fe)]),_:1},8,["class"])]),_:1}),e(x,{"no-gutters":"",class:"auth-wrapper"},{default:s(()=>[e(u,{lg:"4",class:"d-none d-lg-flex"},{default:s(()=>[m("div",ge,[m("div",Ve,[e($,{"max-width":"505",src:t(U),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),e($,{src:t(q),class:"auth-footer-mask"},null,8,["src"])])]),_:1}),e(u,{lg:"4",class:"d-none d-lg-flex"},{default:s(()=>[e(se)]),_:1}),e(u,{cols:"12",lg:"4",class:"d-flex align-center justify-center"},{default:s(()=>[e(me,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:s(()=>[e(C,null,{default:s(()=>[e(t(Z),{nodes:t(T).app.logo2,class:"mb-6"},null,8,["nodes"]),m("h5",be,i(t(r)("Welcome_to"))+" "+i(t(T).app.title)+"! \u{1F44B}\u{1F3FB} ",1),m("p",_e,i(t(r)("Please sign-in to your account and start the adventure")),1)]),_:1}),e(C),e(C,null,{default:s(()=>[e(t(pe),{ref_key:"refVForm",ref:I,onSubmit:G(z,["prevent"])},{default:s(()=>[e(x,null,{default:s(()=>[e(u,{cols:"12"},{default:s(()=>[e(D,{modelValue:t(b),"onUpdate:modelValue":a[4]||(a[4]=l=>g(b)?b.value=l:null),rules:[B,E],label:t(r)("email"),type:"email"},null,8,["modelValue","rules","label"])]),_:1}),e(u,{cols:"12"},{default:s(()=>[e(D,{modelValue:t(_),"onUpdate:modelValue":a[5]||(a[5]=l=>g(_)?_.value=l:null),label:t(r)("password"),rules:[o.requiredValidator],type:t(V)?"text":"password","error-messages":t(v).password,"append-inner-icon":t(V)?"tabler-eye-off":"tabler-eye","onClick:appendInner":a[6]||(a[6]=l=>V.value=!t(V))},null,8,["modelValue","label","rules","type","error-messages","append-inner-icon"]),m("div",ve,[e(de,{modelValue:t(h),"onUpdate:modelValue":a[7]||(a[7]=l=>g(h)?h.value=l:null),label:t(r)("Remember_me")},null,8,["modelValue","label"]),e(p,{class:"text-primary ms-2 mb-1",to:{name:"dashboards-forgot-password"}},{default:s(()=>[d(i(t(r)("Forgot_Password")),1)]),_:1})]),e(w,{block:"",type:"submit"},{default:s(()=>[d(i(t(r)("login")),1)]),_:1})]),_:1}),e(u,{cols:"12",class:"text-center"},{default:s(()=>[m("span",null,i(t(r)("New on our platform?")),1),e(p,{class:"text-primary ms-2",to:{name:"register"}},{default:s(()=>[d(i(t(r)("Create an account")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})])}}};typeof R=="function"&&R(he);export{he as default};
